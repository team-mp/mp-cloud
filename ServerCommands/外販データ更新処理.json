{
  "Name": "外販データ更新処理",
  "Enabled": true,
  "Triggers": [
    {
      "$type": "Forguncy.SaveLoad.PostRequestTriggerSaveData, ServerDesignerCommon",
      "Permission": {
        "PermissionData": {
          "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionData, Forguncy.RbacPermission.Core",
          "permissionResource": {
            "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionResource, Forguncy.RbacPermission.Core"
          },
          "permissionBindings": [
            {
              "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionBinding, Forguncy.RbacPermission.Core",
              "roleNames": [
                "FGC_LoginUser"
              ]
            }
          ]
        }
      },
      "Parameters": [
        {
          "Name": "P_外販ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_申込ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_外注先ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_見積依頼日",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_見積送付日",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_納品予定日",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_成果品受領日",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_納品日",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_外販特記事項",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_外販ステータスID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_元_外注先ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_元_見積依頼日",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_元_見積送付日",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_元_納品予定日",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_元_成果品受領日",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_元_納品日",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_元_外販特記事項",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_元_外販ステータスID",
          "DataValidationInfo": {}
        }
      ]
    }
  ],
  "Commands": [
    {
      "$type": "Forguncy.Model.ServerTransactionCommand, ServerDesignerCommon",
      "CommandList": [
        {
          "$type": "Forguncy.Model.RequestServerCommand, ServerDesignerCommon",
          "ServerCommandName": "登録更新ラベル取得",
          "ReturnPropertiesTo": [
            {
              "ResultPropertyName": "R_ラベル名",
              "ResultTo": {
                "SerializeProperty": "最終更新ラベル"
              }
            }
          ],
          "RefreshAfterFinish": true,
          "CheckDataValidation": true
        },
        {
          "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
          "ConditionAndCommandPairList": [
            {
              "Condition": {
                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                "param": {
                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                  "ParamObject": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=P_外販ID"
                  }
                },
                "value": "%Null%"
              },
              "CommandList": [
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "外販ST",
                  "TableValue": {
                    "TableName": "m_external_status",
                    "TableValueType": 1,
                    "BindingInfos": [
                      {
                        "GUID": "0cdaf381-9e1f-4f6f-a6da-71cee0ded7be",
                        "BindingInfo": {
                          "TableName": "m_external_status",
                          "ColumnName": "external_status_id",
                          "GUID": "c7d93ce9-2b73-4a1c-94f5-9e6143948361"
                        },
                        "ColumnName": "外販ステータスID"
                      },
                      {
                        "GUID": "f7e4b9a3-fba3-4f7d-874b-16e6087819de",
                        "BindingInfo": {
                          "TableName": "m_external_status",
                          "ColumnName": "order_status_id",
                          "GUID": "6e83ed80-69fd-4895-a958-bf21cdca9353"
                        },
                        "ColumnName": "申込ステータスID"
                      }
                    ],
                    "SqlCondition": {
                      "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                      "ColumnBindingInfo": {
                        "TableName": "m_external_status",
                        "ColumnName": "external_status_id",
                        "GUID": "d58c0544-a06b-4a84-a019-13bc56966a3d"
                      },
                      "Value": "1"
                    },
                    "NullFormulaValueQueryPolicy": 0
                  },
                  "ID": "92a59a8c9e404ff281366a9f0796f6a1"
                },
                {
                  "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                  "TableName": "t_object_external",
                  "UpdateType": "add",
                  "ShowConfirm": false,
                  "UpdateBindingValues": [
                    {
                      "BindingInfo": {
                        "TableName": "t_object_external",
                        "ColumnName": "object_order_id",
                        "GUID": "48e1e28b-34c7-417c-9e37-512b96582a97"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_申込ID"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_object_external",
                        "ColumnName": "external_status_id",
                        "GUID": "1a1619c0-848b-4466-8c51-f5274dfeb574"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=外販ST.外販ステータスID"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_object_external",
                        "ColumnName": "last_updated_label",
                        "GUID": "9983de89-567f-44ec-b3c1-51ff9234be00"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=最終更新ラベル"
                      }
                    }
                  ],
                  "ParamNameToSaveNewRowValue": "New外販情報"
                },
                {
                  "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                  "TableName": "t_object_order",
                  "ShowConfirm": false,
                  "RowsToUpdate": 1,
                  "RowsToUpdateCondition": {
                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                    "ColumnBindingInfo": {
                      "TableName": "t_object_order",
                      "ColumnName": "object_order_id",
                      "GUID": "5667cdf9-5dc2-4034-99c8-9af764ff20b1"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_申込ID"
                    }
                  },
                  "UpdateBindingValues": [
                    {
                      "BindingInfo": {
                        "TableName": "t_object_order",
                        "ColumnName": "order_status_id",
                        "GUID": "d6199996-8a90-4bc9-8151-090fe5c5ba84"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=外販ST.申込ステータスID"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_object_order",
                        "ColumnName": "latest_external_id",
                        "GUID": "cb50e6f9-d49b-4632-abea-6fd653f7ca7e"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=New外販情報.外販ID"
                      }
                    }
                  ]
                }
              ],
              "ID": "ab318dde-b224-4f76-97eb-d6676496ea06"
            },
            {
              "CommandList": [
                {
                  "$type": "Forguncy.Model.RequestServerCommand, ServerDesignerCommon",
                  "ServerCommandName": "外販データ排他チェック",
                  "Parameters": [
                    {
                      "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                      "ParamName": "P_外販ID",
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_外販ID"
                      }
                    },
                    {
                      "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                      "ParamName": "P_元_外注先ID",
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_元_外注先ID"
                      }
                    },
                    {
                      "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                      "ParamName": "P_元_見積依頼日",
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_元_見積依頼日"
                      }
                    },
                    {
                      "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                      "ParamName": "P_元_見積送付日",
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_元_見積送付日"
                      }
                    },
                    {
                      "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                      "ParamName": "P_元_納品予定日",
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_元_納品予定日"
                      }
                    },
                    {
                      "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                      "ParamName": "P_元_成果品受領日",
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_元_成果品受領日"
                      }
                    },
                    {
                      "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                      "ParamName": "P_元_納品日",
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_元_納品日"
                      }
                    },
                    {
                      "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                      "ParamName": "P_元_外販特記事項",
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_元_外販特記事項"
                      }
                    },
                    {
                      "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                      "ParamName": "P_元_外販ステータスID",
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_元_外販ステータスID"
                      }
                    }
                  ],
                  "ResultErrorCodeTo": {
                    "SerializeProperty": "リターンコード"
                  },
                  "ResultMessageTo": {
                    "SerializeProperty": "リターンメッセージ"
                  },
                  "RefreshAfterFinish": true,
                  "CheckDataValidation": true
                },
                {
                  "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                  "ConditionAndCommandPairList": [
                    {
                      "Condition": {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=リターンコード"
                          }
                        },
                        "value": "0",
                        "compareType": 1
                      },
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
                          "ErrorCode": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=リターンコード"
                          },
                          "Message": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=リターンメッセージ"
                          }
                        }
                      ],
                      "ID": "3b1f018f-f444-4c92-aea1-6f9102a86261"
                    }
                  ]
                },
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "元の外販情報",
                  "TableValue": {
                    "TableName": "t_object_external",
                    "TableValueType": 1,
                    "BindingInfos": [
                      {
                        "GUID": "77c02aeb-2607-4e73-9ff8-0f20a980608f",
                        "BindingInfo": {
                          "TableName": "t_object_external",
                          "ColumnName": "outsourcing_id",
                          "GUID": "9e857244-d07e-4021-88ae-91f529d1af2c"
                        },
                        "ColumnName": "外注先ID"
                      }
                    ],
                    "SqlCondition": {
                      "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                      "ColumnBindingInfo": {
                        "TableName": "t_object_external",
                        "ColumnName": "external_id",
                        "GUID": "8f32d1c8-6878-4277-b1ed-c67afbc176e6"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_外販ID"
                      }
                    },
                    "NullFormulaValueQueryPolicy": 0
                  },
                  "ID": "044d0fa3fa9e446d90faad3da00a3c9e"
                },
                {
                  "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                  "TableName": "t_object_external",
                  "ShowConfirm": false,
                  "RowsToUpdate": 1,
                  "RowsToUpdateCondition": {
                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                    "ColumnBindingInfo": {
                      "TableName": "t_object_external",
                      "ColumnName": "external_id",
                      "GUID": "de779c05-4539-4c07-847a-bb19654027a6"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_外販ID"
                    }
                  },
                  "UpdateBindingValues": [
                    {
                      "BindingInfo": {
                        "TableName": "t_object_external",
                        "ColumnName": "object_order_id",
                        "GUID": "60516733-fdc4-4012-ad58-000282107c93"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_申込ID"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_object_external",
                        "ColumnName": "outsourcing_id",
                        "GUID": "c9653cd0-48b9-4feb-b1f1-d604eb3018e9"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_外注先ID"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_object_external",
                        "ColumnName": "estimate_requested_date",
                        "GUID": "92115532-1b48-4e5a-8df6-c113c881d525"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_見積依頼日"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_object_external",
                        "ColumnName": "estimate_sending_date",
                        "GUID": "5578ea38-90c8-4955-9a59-6780ef395bb1"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_見積送付日"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_object_external",
                        "ColumnName": "scheduled_delivery_date",
                        "GUID": "765a33a8-7036-45b8-9fbb-9c27d4d90a59"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_納品予定日"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_object_external",
                        "ColumnName": "deliverables_receipt_date",
                        "GUID": "211a9f0a-b2b6-48fc-8917-055e148f1ea3"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_成果品受領日"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_object_external",
                        "ColumnName": "delivery_date",
                        "GUID": "66f107a4-7741-41db-bdb5-07c91343a1f8"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_納品日"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_object_external",
                        "ColumnName": "external_notice",
                        "GUID": "9125a034-8921-4a2f-ae97-30cfbe462128"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_外販特記事項"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_object_external",
                        "ColumnName": "external_status_id",
                        "GUID": "6bf030a7-0d7f-422c-afde-c25b93ea65c0"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_外販ステータスID"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_object_external",
                        "ColumnName": "last_updated_label",
                        "GUID": "882f868b-97b5-4ddf-acb8-00a11a064f7f"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=最終更新ラベル"
                      }
                    }
                  ]
                },
                {
                  "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                  "ConditionAndCommandPairList": [
                    {
                      "Condition": {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=P_外注先ID"
                          }
                        },
                        "value": {
                          "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                          "SerializeProperty": "=元の外販情報.外注先ID"
                        },
                        "compareType": 1
                      },
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.RequestServerCommand, ServerDesignerCommon",
                          "ServerCommandName": "支払先ID取得",
                          "Parameters": [
                            {
                              "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                              "ParamName": "P_外注先ID",
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=P_外注先ID"
                              }
                            }
                          ],
                          "ReturnPropertiesTo": [
                            {
                              "ResultPropertyName": "R_支払先ID",
                              "ResultTo": {
                                "SerializeProperty": "支払先ID"
                              }
                            },
                            {
                              "ResultPropertyName": "R_支払先略称名"
                            },
                            {
                              "ResultPropertyName": "R_外注先略称名"
                            }
                          ],
                          "RefreshAfterFinish": true,
                          "CheckDataValidation": true,
                          "Comments": "支払先ID取得"
                        },
                        {
                          "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                          "TableName": "t_object_product",
                          "ShowConfirm": false,
                          "RowsToUpdate": 1,
                          "RowsToUpdateCondition": {
                            "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                            "SubConditions": [
                              {
                                "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                "ColumnBindingInfo": {
                                  "TableName": "t_object_product",
                                  "ColumnName": "external_id",
                                  "GUID": "b2da3f75-b4b5-4b62-b953-cf65cdbdf98d"
                                },
                                "Value": {
                                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                  "SerializeProperty": "=P_外販ID"
                                }
                              },
                              {
                                "$type": "ForguncyDataAccess.TextCESqlCondition, ForguncyDataAccess",
                                "CompareType": 8,
                                "ColumnBindingInfo": {
                                  "TableName": "t_object_product",
                                  "ColumnName": "accounting_type",
                                  "GUID": "1571b0f6-02e1-47b7-bba1-160928e74c40"
                                },
                                "Value": "1,3"
                              },
                              {
                                "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                "ColumnBindingInfo": {
                                  "TableName": "t_object_product",
                                  "ColumnName": "purchase_account_complete_flg",
                                  "GUID": "b1041b7f-3b6a-4e6c-aa8f-1617d0be1bb7"
                                },
                                "Value": "0"
                              }
                            ]
                          },
                          "UpdateBindingValues": [
                            {
                              "BindingInfo": {
                                "TableName": "t_object_product",
                                "ColumnName": "payment_comp_id",
                                "GUID": "3e1a161f-5006-413e-892e-31ede769055c"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=支払先ID"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_object_product",
                                "ColumnName": "outsourcing_id",
                                "GUID": "3fe89e71-de63-4736-bcda-4744496bc6e1"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=P_外注先ID"
                              }
                            }
                          ],
                          "Comments": "変更後の支払先IDを設定する"
                        },
                        {
                          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                          "ParameterName": "物件商品",
                          "TableValue": {
                            "TableName": "t_object_product",
                            "BindingInfos": [
                              {
                                "GUID": "95750d3f-5b21-48ba-814a-4eec071570c8",
                                "BindingInfo": {
                                  "TableName": "t_object_product",
                                  "ColumnName": "object_product_id",
                                  "GUID": "10474c25-41bf-43bd-8f81-7ccfa374d7fc"
                                },
                                "ColumnName": "物件商品ID"
                              },
                              {
                                "GUID": "948f5743-01a2-4e83-b9aa-6f6afbebfe49",
                                "BindingInfo": {
                                  "TableName": "t_object_product",
                                  "ColumnName": "product_id",
                                  "GUID": "99e84cc2-cad3-4811-9621-9948af720356"
                                },
                                "ColumnName": "商品ID"
                              },
                              {
                                "GUID": "d6461371-875b-4875-822b-2e0e0a569884",
                                "BindingInfo": {
                                  "TableName": "t_object_product",
                                  "ColumnName": "purchase_amount",
                                  "GUID": "74be82d4-ef66-407e-93fb-136c498cfd08"
                                },
                                "ColumnName": "仕入金額"
                              }
                            ],
                            "SqlCondition": {
                              "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                              "SubConditions": [
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_object_product",
                                    "ColumnName": "external_id",
                                    "GUID": "3b62035a-d0ed-46f3-b015-7d2b23f3957e"
                                  },
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=P_外販ID"
                                  }
                                },
                                {
                                  "$type": "ForguncyDataAccess.TextCESqlCondition, ForguncyDataAccess",
                                  "CompareType": 8,
                                  "ColumnBindingInfo": {
                                    "TableName": "t_object_product",
                                    "ColumnName": "accounting_type",
                                    "GUID": "a1f1cbd1-eedd-435e-a7c1-6b98639c8be9"
                                  },
                                  "Value": "1,3"
                                },
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_object_product",
                                    "ColumnName": "payment_comp_id",
                                    "GUID": "88de5d7b-cd81-457a-947c-f510d4ae6a34"
                                  },
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=支払先ID"
                                  }
                                },
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_object_product",
                                    "ColumnName": "purchase_account_complete_flg",
                                    "GUID": "52f6e1cb-32f2-4423-bace-348ddae9cb0e"
                                  },
                                  "Value": "0"
                                },
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_object_product",
                                    "ColumnName": "change_master_cost_flg",
                                    "GUID": "e9a573ad-5736-4095-80b0-ca2f921057aa"
                                  },
                                  "Value": "0"
                                }
                              ]
                            }
                          },
                          "ID": "33d2e7064f8a49748e956543c79855f4"
                        },
                        {
                          "$type": "Forguncy.Model.LoopCommand, ServerDesignerCommon",
                          "LoopInfo": {
                            "$type": "Forguncy.Model.CountLoopInfo, ServerDesignerCommon",
                            "LoopCount": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=物件商品"
                            },
                            "LoopItemParamName": "Item"
                          },
                          "CommandList": [
                            {
                              "$type": "Forguncy.Model.RequestServerCommand, ServerDesignerCommon",
                              "ServerCommandName": "外注原価取得",
                              "Parameters": [
                                {
                                  "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                                  "ParamName": "P_申込ID",
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=P_申込ID"
                                  }
                                },
                                {
                                  "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                                  "ParamName": "P_外注先ID",
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=P_外注先ID"
                                  }
                                },
                                {
                                  "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                                  "ParamName": "P_商品ID",
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=Item.商品ID"
                                  }
                                },
                                {
                                  "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                                  "ParamName": "R_入力原価",
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=Item.仕入金額"
                                  }
                                }
                              ],
                              "ResultErrorCodeTo": {
                                "SerializeProperty": "リターンコード"
                              },
                              "ResultMessageTo": {
                                "SerializeProperty": "リターンメッセージ"
                              },
                              "ReturnPropertiesTo": [
                                {
                                  "ResultPropertyName": "R_マスタ原価",
                                  "ResultTo": {
                                    "SerializeProperty": "マスタ原価"
                                  }
                                },
                                {
                                  "ResultPropertyName": "R_マスタ原価取得フラグ",
                                  "ResultTo": {
                                    "SerializeProperty": "マスタ原価取得フラグ"
                                  }
                                },
                                {
                                  "ResultPropertyName": "R_マスタ原価変更フラグ"
                                },
                                {
                                  "ResultPropertyName": "R_原価変更ユーザーID"
                                },
                                {
                                  "ResultPropertyName": "R_原価変更日時"
                                }
                              ],
                              "RefreshAfterFinish": true,
                              "CheckDataValidation": true
                            },
                            {
                              "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                              "ConditionAndCommandPairList": [
                                {
                                  "Condition": {
                                    "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                                    "param": {
                                      "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                                      "ParamObject": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=リターンコード"
                                      }
                                    },
                                    "value": "0",
                                    "compareType": 1
                                  },
                                  "CommandList": [
                                    {
                                      "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
                                      "ErrorCode": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=リターンコード"
                                      },
                                      "Message": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=リターンメッセージ"
                                      }
                                    }
                                  ],
                                  "ID": "5ccde8a5-20b0-45c7-aed9-d69a9a7d5eb7"
                                },
                                {
                                  "CommandList": [
                                    {
                                      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                                      "ConditionAndCommandPairList": [
                                        {
                                          "Condition": {
                                            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                                            "param": {
                                              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                                              "ParamObject": {
                                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                                "SerializeProperty": "=マスタ原価取得フラグ"
                                              }
                                            },
                                            "value": "1"
                                          },
                                          "CommandList": [
                                            {
                                              "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                                              "TableName": "t_object_product",
                                              "ShowConfirm": false,
                                              "RowsToUpdate": 1,
                                              "RowsToUpdateCondition": {
                                                "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                                "ColumnBindingInfo": {
                                                  "TableName": "t_object_product",
                                                  "ColumnName": "object_product_id",
                                                  "GUID": "f1368d05-a2c8-464e-a275-57196eae7d06"
                                                },
                                                "Value": {
                                                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                                  "SerializeProperty": "=Item.物件商品ID"
                                                }
                                              },
                                              "UpdateBindingValues": [
                                                {
                                                  "BindingInfo": {
                                                    "TableName": "t_object_product",
                                                    "ColumnName": "get_master_cost_flg",
                                                    "GUID": "60df20e4-8355-481e-a62d-66bef9cfb15b"
                                                  },
                                                  "Value": {
                                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                                    "SerializeProperty": "=マスタ原価取得フラグ"
                                                  }
                                                },
                                                {
                                                  "BindingInfo": {
                                                    "TableName": "t_object_product",
                                                    "ColumnName": "purchase_amount",
                                                    "GUID": "87d518b3-5a02-40f2-a708-4a4052535c86"
                                                  },
                                                  "Value": {
                                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                                    "SerializeProperty": "=マスタ原価"
                                                  }
                                                }
                                              ],
                                              "Comments": ""
                                            }
                                          ],
                                          "ID": "b788e853-4aeb-4549-af07-aaaf4a4af090"
                                        },
                                        {
                                          "CommandList": [
                                            {
                                              "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                                              "TableName": "t_object_product",
                                              "ShowConfirm": false,
                                              "RowsToUpdate": 1,
                                              "RowsToUpdateCondition": {
                                                "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                                "ColumnBindingInfo": {
                                                  "TableName": "t_object_product",
                                                  "ColumnName": "object_product_id",
                                                  "GUID": "6b58d2b3-8bee-4c1c-a058-7fc900cfbce9"
                                                },
                                                "Value": {
                                                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                                  "SerializeProperty": "=Item.物件商品ID"
                                                }
                                              },
                                              "UpdateBindingValues": [
                                                {
                                                  "BindingInfo": {
                                                    "TableName": "t_object_product",
                                                    "ColumnName": "get_master_cost_flg",
                                                    "GUID": "9bad0d6d-5867-4bc7-9279-69985caedfca"
                                                  },
                                                  "Value": "0"
                                                }
                                              ],
                                              "Comments": ""
                                            }
                                          ],
                                          "ID": "a9a34897-5dde-48d2-b2aa-a4f38819012c"
                                        }
                                      ],
                                      "Comments": "マスタ原価を設定する"
                                    }
                                  ],
                                  "ID": "5205fd73-2f25-4303-ac3b-cc929f45ba95"
                                }
                              ]
                            },
                            {
                              "$type": "Forguncy.Model.RequestServerCommand, ServerDesignerCommon",
                              "ServerCommandName": "計上確定可能フラグ取得処理",
                              "Parameters": [
                                {
                                  "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                                  "ParamName": "P_物件商品ID",
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=Item.物件商品ID"
                                  }
                                }
                              ],
                              "ReturnPropertiesTo": [
                                {
                                  "ResultPropertyName": "R_売上計上確定可能フラグ",
                                  "ResultTo": {
                                    "SerializeProperty": "売上計上確定可能フラグ"
                                  }
                                },
                                {
                                  "ResultPropertyName": "R_仕入計上確定可能フラグ",
                                  "ResultTo": {
                                    "SerializeProperty": "仕入計上確定可能フラグ"
                                  }
                                },
                                {
                                  "ResultPropertyName": "R_売上計上ステータスID",
                                  "ResultTo": {
                                    "SerializeProperty": "売上計上ステータスID"
                                  }
                                },
                                {
                                  "ResultPropertyName": "R_仕入計上ステータスID",
                                  "ResultTo": {
                                    "SerializeProperty": "仕入計上ステータスID"
                                  }
                                },
                                {
                                  "ResultPropertyName": "R_計上確定可能フラグ",
                                  "ResultTo": {
                                    "SerializeProperty": "計上確定可能フラグ"
                                  }
                                }
                              ],
                              "RefreshAfterFinish": true,
                              "CheckDataValidation": true
                            },
                            {
                              "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                              "TableName": "t_object_product",
                              "ShowConfirm": false,
                              "RowsToUpdate": 1,
                              "RowsToUpdateCondition": {
                                "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                "ColumnBindingInfo": {
                                  "TableName": "t_object_product",
                                  "ColumnName": "object_product_id",
                                  "GUID": "31681ee8-f112-495a-a60f-1749a8d402e0"
                                },
                                "Value": {
                                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                  "SerializeProperty": "=Item.物件商品ID"
                                }
                              },
                              "UpdateBindingValues": [
                                {
                                  "BindingInfo": {
                                    "TableName": "t_object_product",
                                    "ColumnName": "sales_account_status_id",
                                    "GUID": "17de20ea-3239-4f46-8306-543c58c99de1"
                                  },
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=売上計上ステータスID"
                                  }
                                },
                                {
                                  "BindingInfo": {
                                    "TableName": "t_object_product",
                                    "ColumnName": "purchase_account_status_id",
                                    "GUID": "34d1af3f-1494-46da-86d6-dab5e2cc04ea"
                                  },
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=仕入計上ステータスID"
                                  }
                                }
                              ]
                            }
                          ],
                          "Comments": "外注原価を取得"
                        }
                      ],
                      "Comments": "外注先が変更されていたら",
                      "ID": "c06165e7-7782-438e-b4b2-78975c13fcf1"
                    }
                  ]
                }
              ],
              "ID": "413be09d-1e92-4f7b-830c-839ef570f7a1"
            }
          ]
        }
      ]
    }
  ]
}