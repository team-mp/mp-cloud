{
  "Name": "請求番号取得",
  "Enabled": true,
  "Triggers": [
    {
      "$type": "Forguncy.SaveLoad.PostRequestTriggerSaveData, ServerDesignerCommon",
      "Permission": {
        "PermissionData": {
          "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionData, Forguncy.RbacPermission.Core",
          "permissionResource": {
            "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionResource, Forguncy.RbacPermission.Core"
          },
          "permissionBindings": [
            {
              "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionBinding, Forguncy.RbacPermission.Core",
              "roleNames": [
                "FGC_LoginUser"
              ]
            }
          ]
        }
      },
      "Parameters": [
        {
          "Name": "P_請求先ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_物件ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_物件担当者ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_請求日",
          "DataValidationInfo": {}
        }
      ]
    }
  ],
  "Commands": [
    {
      "$type": "Forguncy.Model.ServerTransactionCommand, ServerDesignerCommon",
      "IsolationLevel": 256,
      "CommandList": [
        {
          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
          "ParameterName": "請求先マスタ",
          "TableValue": {
            "TableName": "m_customer",
            "TableValueType": 1,
            "BindingInfos": [
              {
                "GUID": "0b50f57d-0f5e-4055-8ac4-68d24b4ac8e4",
                "BindingInfo": {
                  "TableName": "m_customer",
                  "ColumnName": "invoice_issue_unit_id",
                  "GUID": "eb60afc0-e242-4260-916c-b4f38fa07cf2"
                },
                "ColumnName": "請求書発行単位"
              }
            ],
            "SqlCondition": {
              "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
              "ColumnBindingInfo": {
                "TableName": "m_customer",
                "ColumnName": "customer_id",
                "GUID": "8acd6158-b961-486e-b156-12a0e7ccdafe"
              },
              "Value": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=P_請求先ID"
              }
            }
          },
          "ID": "0e987027908a4da7ac7b445be5029ad9"
        },
        {
          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
          "ParameterName": "請求年月",
          "ParameterValue": {
            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
            "SerializeProperty": "=TEXT(P_請求日,\"yyyymm\")"
          },
          "ID": "c70bbca29a13447d9307e220ce8ffe2a"
        },
        {
          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
          "ParameterName": "最終請求連番",
          "ParameterValue": "0",
          "ID": "633cb3e7b74f4eebbcae86754504cb37"
        },
        {
          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
          "ParameterName": "請求番号",
          "ID": "29b48c5bc8c541b7beeefe0960bb3367"
        },
        {
          "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
          "ConditionAndCommandPairList": [
            {
              "Condition": {
                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                "param": {
                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                  "ParamObject": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=請求先マスタ.請求書発行単位"
                  }
                },
                "value": "1"
              },
              "CommandList": [
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "同一請求番号",
                  "TableValue": {
                    "TableName": "t_sales",
                    "TableValueType": 1,
                    "BindingInfos": [
                      {
                        "GUID": "bd8c628a-1ea0-479e-8890-3d3d38f58325",
                        "BindingInfo": {
                          "TableName": "t_sales",
                          "ColumnName": "billing_no",
                          "GUID": "f3a31ad9-a05f-4d4f-9dc3-fcb138e647b0"
                        },
                        "ColumnName": "請求番号"
                      }
                    ],
                    "SqlCondition": {
                      "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                      "SubConditions": [
                        {
                          "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                          "ColumnBindingInfo": {
                            "TableName": "t_sales",
                            "ColumnName": "billing_comp_id",
                            "GUID": "c3665f2b-cfe5-4d3a-94c7-b7c53b1a9e0e"
                          },
                          "Value": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=P_請求先ID"
                          }
                        },
                        {
                          "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                          "ColumnBindingInfo": {
                            "TableName": "t_sales",
                            "ColumnName": "billing_date",
                            "GUID": "7c45c238-6778-4ce8-9384-f12a2beeb058"
                          },
                          "Value": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=P_請求日"
                          }
                        },
                        {
                          "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                          "ColumnBindingInfo": {
                            "TableName": "t_sales",
                            "ColumnName": "delete_flg",
                            "GUID": "4ba1c91d-2ab9-4bb3-a4f9-c574489459f1"
                          },
                          "Value": "0"
                        }
                      ]
                    },
                    "NullFormulaValueQueryPolicy": 0,
                    "TopCount": "1"
                  },
                  "ID": "05d3fbdb81364fdd95060201d31f54f5"
                },
                {
                  "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                  "ConditionAndCommandPairList": [
                    {
                      "Condition": {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=同一請求番号.請求番号"
                          }
                        },
                        "value": "%Null%",
                        "compareType": 1
                      },
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                          "ParameterName": "請求番号",
                          "ParameterValue": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=同一請求番号.請求番号"
                          },
                          "ID": "94934949627c4e5f9b01dff8ec7898aa"
                        }
                      ],
                      "ID": "ab6a4650-1bee-4102-ab25-9cf85c1f254c"
                    },
                    {
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                          "ParameterName": "請求連番",
                          "TableValue": {
                            "TableName": "m_billing_no",
                            "TableValueType": 1,
                            "BindingInfos": [
                              {
                                "GUID": "382e32d9-c837-4a2f-842a-087e8e4a0b3c",
                                "BindingInfo": {
                                  "TableName": "m_billing_no",
                                  "ColumnName": "serial_number",
                                  "GUID": "d49f4150-6a2d-482e-8544-5dfc660e7c09"
                                },
                                "ColumnName": "連番"
                              }
                            ],
                            "SqlCondition": {
                              "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                              "ColumnBindingInfo": {
                                "TableName": "m_billing_no",
                                "ColumnName": "billing_yyyymm",
                                "GUID": "22dd08e4-01af-4905-b598-68a2cd7a093f"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=請求年月"
                              }
                            },
                            "NullFormulaValueQueryPolicy": 0,
                            "TopCount": "1"
                          },
                          "ID": "57e02b5b4f4d43d580b9768beb277738"
                        },
                        {
                          "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                          "ConditionAndCommandPairList": [
                            {
                              "Condition": {
                                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                                "param": {
                                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                                  "ParamObject": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=請求連番.連番"
                                  }
                                },
                                "value": "%Null%"
                              },
                              "CommandList": [
                                {
                                  "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                                  "TableName": "m_billing_no",
                                  "UpdateType": "add",
                                  "ShowConfirm": false,
                                  "UpdateBindingValues": [
                                    {
                                      "BindingInfo": {
                                        "TableName": "m_billing_no",
                                        "ColumnName": "billing_yyyymm",
                                        "GUID": "25f521c9-6a6d-4364-9413-d4b24378faa6"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=請求年月"
                                      }
                                    },
                                    {
                                      "BindingInfo": {
                                        "TableName": "m_billing_no",
                                        "ColumnName": "serial_number",
                                        "GUID": "4eebc86f-88d3-452e-a68e-a53e90e5d910"
                                      },
                                      "Value": "1"
                                    }
                                  ]
                                }
                              ],
                              "ID": "88d31923-c041-4da6-80d1-861d267861ce"
                            },
                            {
                              "CommandList": [
                                {
                                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                                  "ParameterName": "最終請求連番",
                                  "ParameterValue": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=請求連番.連番"
                                  },
                                  "ID": "e841e3b60b5643e9a09837f14450a183"
                                },
                                {
                                  "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                                  "TableName": "m_billing_no",
                                  "ShowConfirm": false,
                                  "RowsToUpdate": 1,
                                  "RowsToUpdateCondition": {
                                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                    "ColumnBindingInfo": {
                                      "TableName": "m_billing_no",
                                      "ColumnName": "billing_yyyymm",
                                      "GUID": "cea789c6-a052-42de-9fcc-f59a2b56ffd9"
                                    },
                                    "Value": {
                                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                      "SerializeProperty": "=請求年月"
                                    }
                                  },
                                  "UpdateBindingValues": [
                                    {
                                      "BindingInfo": {
                                        "TableName": "m_billing_no",
                                        "ColumnName": "billing_yyyymm",
                                        "GUID": "0ea0ab9e-70d2-402a-a44a-523b1126e243"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=請求年月"
                                      }
                                    },
                                    {
                                      "BindingInfo": {
                                        "TableName": "m_billing_no",
                                        "ColumnName": "serial_number",
                                        "GUID": "2e3d423b-d457-46c3-99fa-f5ab86f0bb92"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=最終請求連番+1"
                                      }
                                    }
                                  ]
                                }
                              ],
                              "ID": "8c7ff103-dc93-4d44-8a69-bb1e45e4823c"
                            }
                          ]
                        }
                      ],
                      "ID": "97e0877c-b0a5-4b46-911a-c4b2f06fd5cb"
                    }
                  ]
                }
              ],
              "Comments": "月次一括",
              "ID": "842bd2e8-4967-4964-9286-7fb74eba4d5a"
            },
            {
              "Condition": {
                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                "param": {
                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                  "ParamObject": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=請求先マスタ.請求書発行単位"
                  }
                },
                "value": "2"
              },
              "CommandList": [
                {
                  "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                  "ConditionAndCommandPairList": [
                    {
                      "Condition": {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=P_物件ID"
                          }
                        },
                        "value": "%Null%"
                      },
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                          "ParameterName": "同一請求番号",
                          "TableValue": {
                            "TableName": "t_sales",
                            "TableValueType": 1,
                            "BindingInfos": [
                              {
                                "GUID": "ee4bea85-7a39-4620-9cf0-0e2e0bf49750",
                                "BindingInfo": {
                                  "TableName": "t_sales",
                                  "ColumnName": "billing_no",
                                  "GUID": "a078284c-3f78-40fe-949c-416ced281387"
                                },
                                "ColumnName": "請求番号"
                              }
                            ],
                            "SqlCondition": {
                              "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                              "SubConditions": [
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "billing_comp_id",
                                    "GUID": "c57ec507-4ecc-4697-8d02-5a6303ce7512"
                                  },
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=P_請求先ID"
                                  }
                                },
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "billing_date",
                                    "GUID": "01ed9972-7d6c-4331-a022-c765dcbb56d8"
                                  },
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=P_請求日"
                                  }
                                },
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "object_order_id",
                                    "GUID": "d2a77682-0a0a-4e3a-bb40-1f7e5ec17ed4",
                                    "RelationBinding": {
                                      "RelatedTable": "t_object_order",
                                      "RelatedColumn": "object_order_id",
                                      "DisplayColumn": "object_id"
                                    }
                                  },
                                  "Value": "%Null%"
                                },
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "delete_flg",
                                    "GUID": "421d3591-14b0-4bb4-9b62-e3c54d482cf9"
                                  },
                                  "Value": "0"
                                }
                              ]
                            },
                            "TopCount": "1"
                          },
                          "ID": "6623fbba8ccb4ff6bf5ae46a3a1badf6"
                        }
                      ],
                      "Comments": "物件IDが無い場合",
                      "ID": "da4258af-3ac9-4e27-b9c0-27bbb0ac63e6"
                    },
                    {
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                          "ParameterName": "同一請求番号",
                          "TableValue": {
                            "TableName": "t_sales",
                            "TableValueType": 1,
                            "BindingInfos": [
                              {
                                "GUID": "8aaf1db2-c016-4df7-abe7-c32f7ba82b51",
                                "BindingInfo": {
                                  "TableName": "t_sales",
                                  "ColumnName": "billing_no",
                                  "GUID": "fcdcaf39-094f-4766-a811-67bd291f83fc"
                                },
                                "ColumnName": "請求番号"
                              }
                            ],
                            "SqlCondition": {
                              "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                              "SubConditions": [
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "billing_comp_id",
                                    "GUID": "d2c3bc68-206a-4cbd-9556-310fda96f74a"
                                  },
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=P_請求先ID"
                                  }
                                },
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "billing_date",
                                    "GUID": "0035f7a1-f088-44b9-ae85-ef674e7853ed"
                                  },
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=P_請求日"
                                  }
                                },
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "object_order_id",
                                    "GUID": "a178fcac-f372-4f75-bff7-02e8a8f1a22c",
                                    "RelationBinding": {
                                      "RelatedTable": "t_object_order",
                                      "RelatedColumn": "object_order_id",
                                      "DisplayColumn": "object_id"
                                    }
                                  },
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=P_物件ID"
                                  }
                                },
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "delete_flg",
                                    "GUID": "685ec898-d551-4cbb-b1ba-3ecde53d8515"
                                  },
                                  "Value": "0"
                                }
                              ]
                            },
                            "NullFormulaValueQueryPolicy": 0,
                            "TopCount": "1"
                          },
                          "ID": "eb0f9ae9824842a49ac1688b87864eb4"
                        }
                      ],
                      "ID": "e0e1913e-8615-40d1-b110-f69937028b74"
                    }
                  ]
                },
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "最終請求連番",
                  "ParameterValue": "0",
                  "ID": "68e983c5b0894de4b24564363b276109"
                },
                {
                  "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                  "ConditionAndCommandPairList": [
                    {
                      "Condition": {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=同一請求番号.請求番号"
                          }
                        },
                        "value": "%Null%",
                        "compareType": 1
                      },
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                          "ParameterName": "請求番号",
                          "ParameterValue": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=同一請求番号.請求番号"
                          },
                          "ID": "cfeda16daca64d7394c58201fc887f44"
                        }
                      ],
                      "ID": "687b4236-16e2-4c8d-9cc2-7b50084d5ab6"
                    },
                    {
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                          "ParameterName": "請求連番",
                          "TableValue": {
                            "TableName": "m_billing_no",
                            "TableValueType": 1,
                            "BindingInfos": [
                              {
                                "GUID": "b571ec78-2a6b-4e48-b8d4-40713a957e47",
                                "BindingInfo": {
                                  "TableName": "m_billing_no",
                                  "ColumnName": "serial_number",
                                  "GUID": "7cac5a97-358b-48a5-8095-e5575000ad39"
                                },
                                "ColumnName": "連番"
                              }
                            ],
                            "SqlCondition": {
                              "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                              "ColumnBindingInfo": {
                                "TableName": "m_billing_no",
                                "ColumnName": "billing_yyyymm",
                                "GUID": "e2b43d46-5e00-43a8-ab31-7b39969b2b0f"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=請求年月"
                              }
                            },
                            "NullFormulaValueQueryPolicy": 0,
                            "TopCount": "1"
                          },
                          "ID": "66b3e3878e624f7985fd679364fd1293"
                        },
                        {
                          "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                          "ConditionAndCommandPairList": [
                            {
                              "Condition": {
                                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                                "param": {
                                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                                  "ParamObject": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=請求連番.連番"
                                  }
                                },
                                "value": "%Null%"
                              },
                              "CommandList": [
                                {
                                  "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                                  "TableName": "m_billing_no",
                                  "UpdateType": "add",
                                  "ShowConfirm": false,
                                  "UpdateBindingValues": [
                                    {
                                      "BindingInfo": {
                                        "TableName": "m_billing_no",
                                        "ColumnName": "billing_yyyymm",
                                        "GUID": "ff81305a-2ad3-4bde-ba88-22ce438eb73a"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=請求年月"
                                      }
                                    },
                                    {
                                      "BindingInfo": {
                                        "TableName": "m_billing_no",
                                        "ColumnName": "serial_number",
                                        "GUID": "098cf696-3b5d-4e19-bb62-5500529f2171"
                                      },
                                      "Value": "1"
                                    }
                                  ]
                                }
                              ],
                              "ID": "c0e134c0-7e91-4e41-8573-f4d48ff1f238"
                            },
                            {
                              "CommandList": [
                                {
                                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                                  "ParameterName": "最終請求連番",
                                  "ParameterValue": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=請求連番.連番"
                                  },
                                  "ID": "6df1dc21f3bb420380b78737729bf18d"
                                },
                                {
                                  "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                                  "TableName": "m_billing_no",
                                  "ShowConfirm": false,
                                  "RowsToUpdate": 1,
                                  "RowsToUpdateCondition": {
                                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                    "ColumnBindingInfo": {
                                      "TableName": "m_billing_no",
                                      "ColumnName": "billing_yyyymm",
                                      "GUID": "4a66ddad-1c7d-4072-b167-7156215af385"
                                    },
                                    "Value": {
                                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                      "SerializeProperty": "=請求年月"
                                    }
                                  },
                                  "UpdateBindingValues": [
                                    {
                                      "BindingInfo": {
                                        "TableName": "m_billing_no",
                                        "ColumnName": "billing_yyyymm",
                                        "GUID": "781d229b-526f-4ee7-9736-c82737602d08"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=請求年月"
                                      }
                                    },
                                    {
                                      "BindingInfo": {
                                        "TableName": "m_billing_no",
                                        "ColumnName": "serial_number",
                                        "GUID": "af63d16c-ba6e-44ca-94fe-92a9f673c678"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=最終請求連番+1"
                                      }
                                    }
                                  ]
                                }
                              ],
                              "ID": "c59d76fb-f666-47e3-8106-603b5987bdb6"
                            }
                          ]
                        }
                      ],
                      "ID": "df1bf052-d2d7-4061-87b5-b0d8b70bf80b"
                    }
                  ]
                }
              ],
              "Comments": "物件単位",
              "ID": "c79e620f-44b5-436c-8125-b114866b5a33"
            },
            {
              "Condition": {
                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                "param": {
                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                  "ParamObject": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=請求先マスタ.請求書発行単位"
                  }
                },
                "value": "3"
              },
              "CommandList": [
                {
                  "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                  "ConditionAndCommandPairList": [
                    {
                      "Condition": {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=P_物件担当者ID"
                          }
                        },
                        "value": "%Null%"
                      },
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                          "ParameterName": "同一請求番号",
                          "TableValue": {
                            "TableName": "t_sales",
                            "TableValueType": 1,
                            "BindingInfos": [
                              {
                                "GUID": "fc2e9fd0-982e-4ad3-a390-72db6e639aa6",
                                "BindingInfo": {
                                  "TableName": "t_sales",
                                  "ColumnName": "billing_no",
                                  "GUID": "aa1b78ee-33ae-498d-a24f-b5811e9e7e82"
                                },
                                "ColumnName": "請求番号"
                              }
                            ],
                            "SqlCondition": {
                              "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                              "SubConditions": [
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "billing_comp_id",
                                    "GUID": "bbc8cdaa-e0f6-4877-b374-cccf81ec45af"
                                  },
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=P_請求先ID"
                                  }
                                },
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "billing_date",
                                    "GUID": "f9e94545-0f09-4516-8fc4-ebd285fd4fe9"
                                  },
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=P_請求日"
                                  }
                                },
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "object_order_id",
                                    "GUID": "c9c2fbfd-4264-4449-bae4-b563ad5189f6",
                                    "RelationBinding": {
                                      "RelatedTable": "t_object_order",
                                      "RelatedColumn": "object_order_id",
                                      "DisplayColumn": "object_user_id"
                                    }
                                  },
                                  "Value": "%Null%"
                                },
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "delete_flg",
                                    "GUID": "386a4b26-e6dd-4477-ab35-d2d1f62ebbf8"
                                  },
                                  "Value": "0"
                                }
                              ]
                            },
                            "TopCount": "1"
                          },
                          "ID": "00011f229914490cbb16afafb43802de"
                        }
                      ],
                      "Comments": "物件IDが無い場合",
                      "ID": "b3fad177-1566-44ec-94e5-cffd188fdff1"
                    },
                    {
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                          "ParameterName": "同一請求番号",
                          "TableValue": {
                            "TableName": "t_sales",
                            "TableValueType": 1,
                            "BindingInfos": [
                              {
                                "GUID": "f3c0e3d2-c296-454f-842f-2a8dd8a43e2b",
                                "BindingInfo": {
                                  "TableName": "t_sales",
                                  "ColumnName": "billing_no",
                                  "GUID": "41c0157d-5f9d-448f-ab0d-42c31399584a"
                                },
                                "ColumnName": "請求番号"
                              }
                            ],
                            "SqlCondition": {
                              "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                              "SubConditions": [
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "billing_comp_id",
                                    "GUID": "97494000-a44e-4c9e-8299-f4c613b5f436"
                                  },
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=P_請求先ID"
                                  }
                                },
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "billing_date",
                                    "GUID": "e94c7d82-b581-4ffa-bb15-378c8bcf0a79"
                                  },
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=P_請求日"
                                  }
                                },
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "object_order_id",
                                    "GUID": "0fb88404-e9e3-4dc1-af38-a0572f7a7b2e",
                                    "RelationBinding": {
                                      "RelatedTable": "t_object_order",
                                      "RelatedColumn": "object_order_id",
                                      "DisplayColumn": "object_user_id"
                                    }
                                  },
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=P_物件担当者ID"
                                  }
                                },
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "delete_flg",
                                    "GUID": "a627dd4e-b4c8-4ddd-94d1-5e53e046a3fa"
                                  },
                                  "Value": "0"
                                }
                              ]
                            },
                            "NullFormulaValueQueryPolicy": 0,
                            "TopCount": "1"
                          },
                          "ID": "930865400edf45bcb0586e08c18dbece"
                        }
                      ],
                      "ID": "cd063281-d85b-4c2c-aae1-383460200d97"
                    }
                  ]
                },
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "最終請求連番",
                  "ParameterValue": "0",
                  "ID": "d00e6f9b99ca4879be20eea1708f0adf"
                },
                {
                  "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                  "ConditionAndCommandPairList": [
                    {
                      "Condition": {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=同一請求番号.請求番号"
                          }
                        },
                        "value": "%Null%",
                        "compareType": 1
                      },
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                          "ParameterName": "請求番号",
                          "ParameterValue": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=同一請求番号.請求番号"
                          },
                          "ID": "a3b743868c8e45fc8b28a9757284e22f"
                        }
                      ],
                      "ID": "a5a6975a-066c-45a1-a145-11478de6af25"
                    },
                    {
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                          "ParameterName": "請求連番",
                          "TableValue": {
                            "TableName": "m_billing_no",
                            "TableValueType": 1,
                            "BindingInfos": [
                              {
                                "GUID": "0aef0cc5-fcec-49b5-875c-f891cce09631",
                                "BindingInfo": {
                                  "TableName": "m_billing_no",
                                  "ColumnName": "serial_number",
                                  "GUID": "21ff6c3f-503f-44e7-94bf-71c47bdbf37b"
                                },
                                "ColumnName": "連番"
                              }
                            ],
                            "SqlCondition": {
                              "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                              "ColumnBindingInfo": {
                                "TableName": "m_billing_no",
                                "ColumnName": "billing_yyyymm",
                                "GUID": "e2b43d46-5e00-43a8-ab31-7b39969b2b0f"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=請求年月"
                              }
                            },
                            "NullFormulaValueQueryPolicy": 0,
                            "TopCount": "1"
                          },
                          "ID": "2383ed1abe334350acb8820d8ef73166"
                        },
                        {
                          "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                          "ConditionAndCommandPairList": [
                            {
                              "Condition": {
                                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                                "param": {
                                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                                  "ParamObject": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=請求連番.連番"
                                  }
                                },
                                "value": "%Null%"
                              },
                              "CommandList": [
                                {
                                  "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                                  "TableName": "m_billing_no",
                                  "UpdateType": "add",
                                  "ShowConfirm": false,
                                  "UpdateBindingValues": [
                                    {
                                      "BindingInfo": {
                                        "TableName": "m_billing_no",
                                        "ColumnName": "billing_yyyymm",
                                        "GUID": "31c36ce8-21f9-41bc-957d-6c44470ddff2"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=請求年月"
                                      }
                                    },
                                    {
                                      "BindingInfo": {
                                        "TableName": "m_billing_no",
                                        "ColumnName": "serial_number",
                                        "GUID": "0434697d-ec55-450a-a5e0-d71dfb98e5c5"
                                      },
                                      "Value": "1"
                                    }
                                  ]
                                }
                              ],
                              "ID": "9fa65086-0637-43dc-9fb7-43f7a60387e8"
                            },
                            {
                              "CommandList": [
                                {
                                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                                  "ParameterName": "最終請求連番",
                                  "ParameterValue": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=請求連番.連番"
                                  },
                                  "ID": "df546955b5a44484becd6604a910c96b"
                                },
                                {
                                  "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                                  "TableName": "m_billing_no",
                                  "ShowConfirm": false,
                                  "RowsToUpdate": 1,
                                  "RowsToUpdateCondition": {
                                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                    "ColumnBindingInfo": {
                                      "TableName": "m_billing_no",
                                      "ColumnName": "billing_yyyymm",
                                      "GUID": "4a66ddad-1c7d-4072-b167-7156215af385"
                                    },
                                    "Value": {
                                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                      "SerializeProperty": "=請求年月"
                                    }
                                  },
                                  "UpdateBindingValues": [
                                    {
                                      "BindingInfo": {
                                        "TableName": "m_billing_no",
                                        "ColumnName": "billing_yyyymm",
                                        "GUID": "60aae6ff-d209-44ef-8905-34b3787c35e9"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=請求年月"
                                      }
                                    },
                                    {
                                      "BindingInfo": {
                                        "TableName": "m_billing_no",
                                        "ColumnName": "serial_number",
                                        "GUID": "315ba8d8-24fd-4967-a231-251806ecea45"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=最終請求連番+1"
                                      }
                                    }
                                  ]
                                }
                              ],
                              "ID": "790bc33a-9041-49bb-b422-7df34d0f1a91"
                            }
                          ]
                        }
                      ],
                      "ID": "96a74a82-cc3d-4b44-893d-24578e7648b5"
                    }
                  ]
                }
              ],
              "Comments": "物件担当者単位",
              "ID": "10eb2b3f-197e-4421-b045-9dc8ced3b0a5"
            }
          ],
          "Comments": "請求番号取得"
        },
        {
          "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
          "ConditionAndCommandPairList": [
            {
              "Condition": {
                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                "param": {
                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                  "ParamObject": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=請求番号"
                  }
                },
                "value": "%Null%"
              },
              "CommandList": [
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "新規請求連番",
                  "ParameterValue": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=最終請求連番+1"
                  },
                  "ID": "8a1a0897d2554f1eadd003115fa0599b"
                },
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "請求番号",
                  "ParameterValue": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=\"MC\"&請求年月&TEXT(新規請求連番,\"000\")"
                  },
                  "ID": "0f69cafb3153413687701d08a29e53ff"
                }
              ],
              "ID": "03c3cbf7-950a-4aec-b1cc-d3118396f943"
            },
            {
              "CommandList": [
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "新規請求連番",
                  "ParameterValue": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=VALUE(RIGHT(請求番号,3))"
                  },
                  "ID": "de1be3873c1746368b22e9754382a92f"
                }
              ],
              "ID": "cfbc4fc0-5a94-4aa9-9f63-dd5858a9ccfc"
            }
          ]
        }
      ]
    },
    {
      "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
      "ErrorCode": "0",
      "CustomReturns": [
        {
          "ReturnPropertyName": "R_請求番号",
          "Value": {
            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
            "SerializeProperty": "=請求番号"
          }
        },
        {
          "ReturnPropertyName": "R_請求連番",
          "Value": {
            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
            "SerializeProperty": "=新規請求連番"
          }
        }
      ]
    }
  ],
  "ReturnProperties": [
    {
      "Name": "R_請求番号"
    },
    {
      "Name": "R_請求連番"
    }
  ]
}