{
  "Enabled": true,
  "Triggers": [
    {
      "$type": "Forguncy.ServerCommands.Models.PostRequestTrigger, ServerDesignerCommon",
      "Permission": {
        "AllowRoles": [
          "FGC_LoginUser"
        ]
      },
      "Parameters": [
        {
          "Type": 1,
          "ArrayParamItems": [
            {
              "Name": "P_タスクID"
            },
            {
              "Name": "P_選択フラグ"
            }
          ],
          "OnlySendChangedData": true,
          "PrimaryKeys": [
            "タスクID"
          ],
          "Name": "P_タスクビュー"
        },
        {
          "Name": "P_処理済み更新フラグ"
        }
      ]
    }
  ],
  "Commands": [
    {
      "$type": "Forguncy.Model.ServerTransactionCommand, ServerDesignerCommon",
      "CommandList": [
        {
          "$type": "Forguncy.Model.LoopCommand, ServerDesignerCommon",
          "LoopInfo": {
            "$type": "Forguncy.Model.CountLoopInfo, ServerDesignerCommon",
            "LoopCount": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=P_タスクビュー.EditRows"
            },
            "LoopItemParamName": "Item"
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "タスク情報",
              "TableValue": {
                "TableName": "t_task",
                "TableValueType": 1,
                "BindingInfos": [
                  {
                    "BindingInfo": {
                      "TableName": "t_task",
                      "ColumnName": "schedule_mail_id"
                    },
                    "ColumnName": "スケジュールメールID"
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_task",
                      "ColumnName": "schedule_mail_id",
                      "RelationBinding": {
                        "RelatedTable": "t_schedule_mail",
                        "RelatedColumn": "schedule_mail_id",
                        "DisplayColumn": "active_flg"
                      }
                    },
                    "ColumnName": "有効フラグ"
                  }
                ],
                "SqlCondition": {
                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                  "ColumnBindingInfo": {
                    "TableName": "t_task",
                    "ColumnName": "task_id"
                  },
                  "Value": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=Item.P_タスクID"
                  }
                }
              },
              "ID": "0d45770372ea4280ae6de1b351cd11f4"
            },
            {
              "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
              "ConditionAndCommandPairList": [
                {
                  "Condition": {
                    "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                    "param": {
                      "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                      "ParamObject": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=Item.P_選択フラグ"
                      }
                    },
                    "value": "1"
                  },
                  "CommandList": [
                    {
                      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                      "ConditionAndCommandPairList": [
                        {
                          "Condition": {
                            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                            "param": {
                              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                              "ParamObject": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=P_処理済み更新フラグ"
                              }
                            },
                            "value": "1"
                          },
                          "CommandList": [
                            {
                              "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                              "TableName": "t_task",
                              "ShowConfirm": false,
                              "ConfirmText": "本当に更新してもよろしいですか？",
                              "RowsToUpdate": 1,
                              "RowsToUpdateCondition": {
                                "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                "ColumnBindingInfo": {
                                  "TableName": "t_task",
                                  "ColumnName": "task_id"
                                },
                                "Value": {
                                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                  "SerializeProperty": "=Item.P_タスクID"
                                }
                              },
                              "UpdateValues": [
                                {
                                  "ColumnName": "processed_flg",
                                  "Value": "1"
                                }
                              ]
                            },
                            {
                              "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                              "ConditionAndCommandPairList": [
                                {
                                  "Condition": {
                                    "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                                    "param": {
                                      "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                                      "ParamObject": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=タスク情報.有効フラグ"
                                      }
                                    },
                                    "value": "1"
                                  },
                                  "CommandList": [
                                    {
                                      "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                                      "TableName": "t_schedule_mail",
                                      "ShowConfirm": false,
                                      "ConfirmText": "本当に更新してもよろしいですか？",
                                      "RowsToUpdate": 1,
                                      "RowsToUpdateCondition": {
                                        "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                        "ColumnBindingInfo": {
                                          "TableName": "t_schedule_mail",
                                          "ColumnName": "schedule_mail_id"
                                        },
                                        "Value": {
                                          "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                          "SerializeProperty": "=タスク情報.スケジュールメールID"
                                        }
                                      },
                                      "UpdateValues": [
                                        {
                                          "ColumnName": "active_flg",
                                          "Value": "0"
                                        }
                                      ],
                                      "Comments": "有効を無効へ"
                                    }
                                  ],
                                  "ID": "1373d9fd-8fed-4abf-8429-c79dca06a048"
                                }
                              ]
                            }
                          ],
                          "ID": "fdfc5062-dd25-4af1-8a9b-8170db314838"
                        },
                        {
                          "CommandList": [
                            {
                              "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                              "TableName": "t_task",
                              "ShowConfirm": false,
                              "ConfirmText": "本当に更新してもよろしいですか？",
                              "RowsToUpdate": 1,
                              "RowsToUpdateCondition": {
                                "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                "ColumnBindingInfo": {
                                  "TableName": "t_task",
                                  "ColumnName": "task_id"
                                },
                                "Value": {
                                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                  "SerializeProperty": "=Item.P_タスクID"
                                }
                              },
                              "UpdateValues": [
                                {
                                  "ColumnName": "processed_flg",
                                  "Value": "0"
                                }
                              ]
                            },
                            {
                              "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                              "ConditionAndCommandPairList": [
                                {
                                  "Condition": {
                                    "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                                    "param": {
                                      "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                                      "ParamObject": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=タスク情報.有効フラグ"
                                      }
                                    },
                                    "value": "0"
                                  },
                                  "CommandList": [
                                    {
                                      "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                                      "TableName": "t_schedule_mail",
                                      "ShowConfirm": false,
                                      "ConfirmText": "本当に更新してもよろしいですか？",
                                      "RowsToUpdate": 1,
                                      "RowsToUpdateCondition": {
                                        "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                        "ColumnBindingInfo": {
                                          "TableName": "t_schedule_mail",
                                          "ColumnName": "schedule_mail_id"
                                        },
                                        "Value": {
                                          "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                          "SerializeProperty": "=タスク情報.スケジュールメールID"
                                        }
                                      },
                                      "UpdateValues": [
                                        {
                                          "ColumnName": "active_flg",
                                          "Value": "1"
                                        }
                                      ],
                                      "Comments": "無効を有効へ戻す"
                                    }
                                  ],
                                  "ID": "5db21909-a2b1-4192-8c85-c850a1532546"
                                }
                              ]
                            }
                          ],
                          "ID": "9cd51deb-0c05-4530-8359-d8334dfd3b27"
                        }
                      ]
                    }
                  ],
                  "ID": "ce6aa129-6990-4da6-9790-8f886c17a201"
                }
              ]
            }
          ]
        },
        {
          "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
          "ErrorCode": "0",
          "CustomReturns": []
        }
      ]
    }
  ],
  "Name": "タスク一括更新処理"
}