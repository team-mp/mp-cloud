{
  "Enabled": true,
  "Triggers": [
    {
      "$type": "Forguncy.ServerCommands.Models.PostRequestTrigger, ServerDesignerCommon",
      "Permission": {
        "AllowRoles": [
          "FGC_LoginUser"
        ]
      },
      "Parameters": [
        {
          "Name": "P_工事見積ID"
        },
        {
          "Name": "P_元_工事見積登録日"
        },
        {
          "Name": "P_元_工事見積会社ID"
        },
        {
          "Name": "P_元_工事見積工法ID"
        },
        {
          "Name": "P_元_見積依頼日"
        },
        {
          "Name": "P_元_見積依頼コメント"
        },
        {
          "Name": "P_元_見積書受領日"
        },
        {
          "Name": "P_元_設計審査結果"
        },
        {
          "Name": "P_元_設計審査コメント"
        },
        {
          "Name": "P_元_設計承認フラグ"
        },
        {
          "Name": "P_元_見積送付日"
        },
        {
          "Name": "P_元_見積送付コメント"
        },
        {
          "Name": "P_元_社内備考"
        },
        {
          "Name": "P_元_工事見積ステータスID"
        }
      ]
    }
  ],
  "Commands": [
    {
      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
      "ConditionAndCommandPairList": [
        {
          "Condition": {
            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
            "param": {
              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
              "ParamObject": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=P_工事見積ID"
              }
            },
            "value": "%Null%"
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
              "ErrorCode": "0",
              "CustomReturns": [],
              "Comments": "工事見積IDが無ければ終了"
            }
          ],
          "ID": "e5db33e0-c9a0-4b06-95ec-17923e209d26"
        }
      ]
    },
    {
      "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
      "ParameterName": "最新の工事見積情報",
      "TableValue": {
        "TableName": "t_object_construction_estimate",
        "TableValueType": 1,
        "BindingInfos": [
          {
            "BindingInfo": {
              "TableName": "t_object_construction_estimate",
              "ColumnName": "construction_estimate_register_date"
            },
            "ColumnName": "工事見積登録日"
          },
          {
            "BindingInfo": {
              "TableName": "t_object_construction_estimate",
              "ColumnName": "construction_customer_id"
            },
            "ColumnName": "工事会社ID"
          },
          {
            "BindingInfo": {
              "TableName": "t_object_construction_estimate",
              "ColumnName": "construction_method_id"
            },
            "ColumnName": "工法ID"
          },
          {
            "BindingInfo": {
              "TableName": "t_object_construction_estimate",
              "ColumnName": "estimate_requested_date"
            },
            "ColumnName": "見積依頼日"
          },
          {
            "BindingInfo": {
              "TableName": "t_object_construction_estimate",
              "ColumnName": "estimate_requested_comment"
            },
            "ColumnName": "見積依頼コメント"
          },
          {
            "BindingInfo": {
              "TableName": "t_object_construction_estimate",
              "ColumnName": "estimate_receipt_date"
            },
            "ColumnName": "見積書受領日"
          },
          {
            "BindingInfo": {
              "TableName": "t_object_construction_estimate",
              "ColumnName": "design_check_result"
            },
            "ColumnName": "設計審査結果"
          },
          {
            "BindingInfo": {
              "TableName": "t_object_construction_estimate",
              "ColumnName": "design_check_comment"
            },
            "ColumnName": "設計審査コメント"
          },
          {
            "BindingInfo": {
              "TableName": "t_object_construction_estimate",
              "ColumnName": "design_approval_flg"
            },
            "ColumnName": "設計承認フラグ"
          },
          {
            "BindingInfo": {
              "TableName": "t_object_construction_estimate",
              "ColumnName": "estimate_sending_date"
            },
            "ColumnName": "見積送付日"
          },
          {
            "BindingInfo": {
              "TableName": "t_object_construction_estimate",
              "ColumnName": "estimate_sending_comment"
            },
            "ColumnName": "見積送付コメント"
          },
          {
            "BindingInfo": {
              "TableName": "t_object_construction_estimate",
              "ColumnName": "internal_notes"
            },
            "ColumnName": "社内備考"
          },
          {
            "BindingInfo": {
              "TableName": "t_object_construction_estimate",
              "ColumnName": "construction_estimate_status_id"
            },
            "ColumnName": "工事見積ステータスID"
          },
          {
            "BindingInfo": {
              "TableName": "t_object_construction_estimate",
              "ColumnName": "object_order_id",
              "RelationBinding": {
                "RelatedTable": "t_object_order",
                "RelatedColumn": "object_order_id",
                "DisplayColumn": "latest_contruction_id",
                "NextRelationBinding": {
                  "RelatedTable": "t_object_construction",
                  "RelatedColumn": "construction_id",
                  "DisplayColumn": "construction_status_id"
                }
              }
            },
            "ColumnName": "工事ステータスID"
          },
          {
            "BindingInfo": {
              "TableName": "t_object_construction_estimate",
              "ColumnName": "last_updated_label"
            },
            "ColumnName": "最終更新ラベル"
          }
        ],
        "SqlCondition": {
          "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
          "ColumnBindingInfo": {
            "TableName": "t_object_construction_estimate",
            "ColumnName": "construction_estimate_id"
          },
          "Value": {
            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
            "SerializeProperty": "=P_工事見積ID"
          }
        }
      },
      "ID": "e9fe012714e4494899871fc220472d55"
    },
    {
      "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
      "ParameterName": "排他エラーフラグ",
      "ParameterValue": "0",
      "ID": "c60439ca8d654940b0a88360113b6228"
    },
    {
      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
      "ConditionAndCommandPairList": [
        {
          "Condition": {
            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
            "param": {
              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
              "ParamObject": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=P_元_工事見積登録日"
              }
            },
            "value": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=最新の工事見積情報.工事見積登録日"
            },
            "compareType": 1
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "排他エラーフラグ",
              "ParameterValue": "1",
              "ID": "e7daefa3e30341c69aafa79cff731758"
            }
          ],
          "ID": "8931bed2-faec-4b99-9552-0b8c5927f9a3"
        }
      ]
    },
    {
      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
      "ConditionAndCommandPairList": [
        {
          "Condition": {
            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
            "param": {
              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
              "ParamObject": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=P_元_工事見積会社ID"
              }
            },
            "value": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=最新の工事見積情報.工事会社ID"
            },
            "compareType": 1
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "排他エラーフラグ",
              "ParameterValue": "1",
              "ID": "e84b55a6006d4d46a7b405e6b0f8e4f6"
            }
          ],
          "ID": "4f126e73-3b37-4f52-a78f-9a2c9c7f78f1"
        }
      ]
    },
    {
      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
      "ConditionAndCommandPairList": [
        {
          "Condition": {
            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
            "param": {
              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
              "ParamObject": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=P_元_工事見積工法ID"
              }
            },
            "value": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=最新の工事見積情報.工法ID"
            },
            "compareType": 1
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "排他エラーフラグ",
              "ParameterValue": "1",
              "ID": "36b0a5c6868642e0b9eacad920a6538d"
            }
          ],
          "ID": "c8f6b91d-2e76-4bee-ae9d-8355a09dd1d7"
        }
      ]
    },
    {
      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
      "ConditionAndCommandPairList": [
        {
          "Condition": {
            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
            "param": {
              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
              "ParamObject": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=P_元_見積依頼日"
              }
            },
            "value": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=最新の工事見積情報.見積依頼日"
            },
            "compareType": 1
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "排他エラーフラグ",
              "ParameterValue": "1",
              "ID": "25a7ea80a5da4afc8bd499ebd1748cde"
            }
          ],
          "ID": "2c315f22-e3cf-4b9b-b94d-18d93e49b39d"
        }
      ]
    },
    {
      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
      "ConditionAndCommandPairList": [
        {
          "Condition": {
            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
            "param": {
              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
              "ParamObject": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=P_元_見積依頼コメント"
              }
            },
            "value": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=最新の工事見積情報.見積依頼コメント"
            },
            "compareType": 1
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "排他エラーフラグ",
              "ParameterValue": "1",
              "ID": "4ee79657980140d09f1647359ce0131d"
            }
          ],
          "ID": "903c0015-b801-4483-b77e-cb9df5fd2e25"
        }
      ]
    },
    {
      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
      "ConditionAndCommandPairList": [
        {
          "Condition": {
            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
            "param": {
              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
              "ParamObject": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=P_元_見積書受領日"
              }
            },
            "value": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=最新の工事見積情報.見積書受領日"
            },
            "compareType": 1
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "排他エラーフラグ",
              "ParameterValue": "1",
              "ID": "adbe4d86be414d6fa8c622688f7ecd2c"
            }
          ],
          "ID": "4ee5d088-c418-419b-8484-388f6d07d152"
        }
      ]
    },
    {
      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
      "ConditionAndCommandPairList": [
        {
          "Condition": {
            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
            "param": {
              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
              "ParamObject": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=P_元_設計審査結果"
              }
            },
            "value": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=最新の工事見積情報.設計審査結果"
            },
            "compareType": 1
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "排他エラーフラグ",
              "ParameterValue": "1",
              "ID": "2bf2fc6262234c909dd52972ab703308"
            }
          ],
          "ID": "421d76e9-f1c2-4d3f-8461-48ab9009a1b5"
        }
      ]
    },
    {
      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
      "ConditionAndCommandPairList": [
        {
          "Condition": {
            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
            "param": {
              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
              "ParamObject": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=P_元_設計審査コメント"
              }
            },
            "value": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=P_元_設計審査コメント"
            },
            "compareType": 1
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "排他エラーフラグ",
              "ParameterValue": "1",
              "ID": "8bf06529786541d49542615b35316ad1"
            }
          ],
          "ID": "82b89c67-9361-4a38-bb1b-28e4195496bc"
        }
      ]
    },
    {
      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
      "ConditionAndCommandPairList": [
        {
          "Condition": {
            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
            "param": {
              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
              "ParamObject": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=P_元_設計承認フラグ"
              }
            },
            "value": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=最新の工事見積情報.設計承認フラグ"
            },
            "compareType": 1
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "排他エラーフラグ",
              "ParameterValue": "1",
              "ID": "4aaa4255ea2d45be902cf2c9464f2419"
            }
          ],
          "ID": "ceae40d0-873f-426b-b222-f79dcf9c00b8"
        }
      ]
    },
    {
      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
      "ConditionAndCommandPairList": [
        {
          "Condition": {
            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
            "param": {
              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
              "ParamObject": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=P_元_見積送付日"
              }
            },
            "value": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=最新の工事見積情報.見積送付日"
            },
            "compareType": 1
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "排他エラーフラグ",
              "ParameterValue": "1",
              "ID": "45f18c76c0ed4b908b50d5a88f7fd9f4"
            }
          ],
          "ID": "af7922a0-9b25-404b-8bf8-329c3b0535bf"
        }
      ]
    },
    {
      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
      "ConditionAndCommandPairList": [
        {
          "Condition": {
            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
            "param": {
              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
              "ParamObject": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=P_元_見積送付コメント"
              }
            },
            "value": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=最新の工事見積情報.見積送付コメント"
            },
            "compareType": 1
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "排他エラーフラグ",
              "ParameterValue": "1",
              "ID": "f958a2198448481a9e90a15b5d7655fd"
            }
          ],
          "ID": "5d2f4607-dadf-4e84-bbee-d84e06c9414f"
        }
      ]
    },
    {
      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
      "ConditionAndCommandPairList": [
        {
          "Condition": {
            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
            "param": {
              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
              "ParamObject": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=P_元_社内備考"
              }
            },
            "value": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=最新の工事見積情報.社内備考"
            },
            "compareType": 1
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "排他エラーフラグ",
              "ParameterValue": "1",
              "ID": "018acf1f7ecb44b5b4357a39d6f2a7b6"
            }
          ],
          "ID": "e303c9f5-3280-4737-bea5-f7f58c55baf4"
        }
      ]
    },
    {
      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
      "ConditionAndCommandPairList": [
        {
          "Condition": {
            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
            "param": {
              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
              "ParamObject": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=P_元_工事見積ステータスID"
              }
            },
            "value": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=最新の工事見積情報.工事見積ステータスID"
            },
            "compareType": 1
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "排他エラーフラグ",
              "ParameterValue": "1",
              "ID": "355e0878e1434678a60261c0eb146881"
            }
          ],
          "ID": "f94eccdb-4ae3-438c-9da2-f8fe47a19eca"
        }
      ]
    },
    {
      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
      "ConditionAndCommandPairList": [
        {
          "Condition": {
            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
            "param": {
              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
              "ParamObject": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=排他エラーフラグ"
              }
            },
            "value": "1"
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
              "ErrorCode": "100",
              "Message": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=\"他のユーザーによりデータ更新の直前に登録内容が編集されました。\"&CHAR(10)&\"編集結果は、破棄されリフレッシュされます。\"&CHAR(10)&\"最終更新者：\"&最新の工事見積情報.最終更新ラベル"
              },
              "CustomReturns": []
            }
          ],
          "ID": "a24bc4ea-8c46-441b-b5e1-b37568e698dd"
        },
        {
          "CommandList": [
            {
              "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
              "ErrorCode": "0",
              "CustomReturns": []
            }
          ],
          "ID": "0ed0eace-d2f5-44b3-af3e-c71ea0d43388"
        }
      ]
    }
  ],
  "Name": "工事見積データ排他チェック"
}