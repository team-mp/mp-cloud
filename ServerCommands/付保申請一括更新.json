{
  "Enabled": true,
  "Triggers": [
    {
      "$type": "Forguncy.ServerCommands.Models.PostRequestTrigger, ServerDesignerCommon",
      "Permission": {
        "AllowRoles": [
          "FGC_LoginUser"
        ]
      },
      "Parameters": [
        {
          "Name": "P_付保申請日"
        },
        {
          "Type": 1,
          "ArrayParamItems": [
            {
              "Name": "P_付保ID"
            },
            {
              "Name": "P_選択フラグ"
            },
            {
              "Name": "P_付保証明書必要フラグ"
            }
          ],
          "OnlySendChangedData": true,
          "PrimaryKeys": [
            "付保ID"
          ],
          "Name": "P_付保申請リスト"
        },
        {
          "Name": "P_付保申請フラグ"
        },
        {
          "Name": "P_付保解除フラグ"
        }
      ]
    }
  ],
  "Commands": [
    {
      "$type": "Forguncy.Model.ServerTransactionCommand, ServerDesignerCommon",
      "CommandList": [
        {
          "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
          "ConditionAndCommandPairList": [
            {
              "Condition": {
                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                "param": {
                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                  "ParamObject": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=P_付保申請フラグ"
                  }
                },
                "value": "1"
              },
              "CommandList": [
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "付保申請済みST",
                  "TableValue": {
                    "TableName": "m_insurance_status",
                    "OnlyGetValue": true,
                    "TableValueType": 0,
                    "BindingInfos": [
                      {
                        "BindingInfo": {
                          "TableName": "m_insurance_status",
                          "ColumnName": "insurance_status_id"
                        },
                        "ColumnName": "insurance_status_id"
                      }
                    ],
                    "SqlCondition": {
                      "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                      "ColumnBindingInfo": {
                        "TableName": "m_insurance_status",
                        "ColumnName": "application_complete_flg"
                      },
                      "Value": "1"
                    }
                  },
                  "ID": "41afbbb2ae0d49c49b1c9d80afe09109"
                },
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "証明書申請待ちST",
                  "TableValue": {
                    "TableName": "m_insurance_status",
                    "OnlyGetValue": true,
                    "TableValueType": 0,
                    "BindingInfos": [
                      {
                        "BindingInfo": {
                          "TableName": "m_insurance_status",
                          "ColumnName": "insurance_status_id"
                        },
                        "ColumnName": "insurance_status_id"
                      }
                    ],
                    "SqlCondition": {
                      "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                      "ColumnBindingInfo": {
                        "TableName": "m_insurance_status",
                        "ColumnName": "certificate_application_wait_flg"
                      },
                      "Value": "1"
                    }
                  },
                  "ID": "0618295e522b44b89dda5979bcbb810c"
                },
                {
                  "$type": "Forguncy.Model.LoopCommand, ServerDesignerCommon",
                  "LoopInfo": {
                    "$type": "Forguncy.Model.CountLoopInfo, ServerDesignerCommon",
                    "LoopCount": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_付保申請リスト.EditRows"
                    },
                    "LoopIndexParamName": "カウンター",
                    "LoopItemParamName": "Item"
                  },
                  "CommandList": [
                    {
                      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                      "ConditionAndCommandPairList": [
                        {
                          "Condition": {
                            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                            "param": {
                              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                              "ParamObject": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=Item.P_選択フラグ"
                              }
                            },
                            "value": "1"
                          },
                          "CommandList": [
                            {
                              "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                              "ConditionAndCommandPairList": [
                                {
                                  "Condition": {
                                    "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                                    "param": {
                                      "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                                      "ParamObject": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=Item.P_付保証明書必要フラグ"
                                      }
                                    },
                                    "value": "1"
                                  },
                                  "CommandList": [
                                    {
                                      "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                                      "TableName": "t_object_insurance",
                                      "ShowConfirm": false,
                                      "ConfirmText": "本当に更新してもよろしいですか？",
                                      "RowsToUpdate": 1,
                                      "RowsToUpdateCondition": {
                                        "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                        "ColumnBindingInfo": {
                                          "TableName": "t_object_insurance",
                                          "ColumnName": "insurance_id"
                                        },
                                        "Value": {
                                          "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                          "SerializeProperty": "=Item.P_付保ID"
                                        }
                                      },
                                      "UpdateValues": [
                                        {
                                          "ColumnName": "insurance_apply_date",
                                          "Value": {
                                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                            "SerializeProperty": "=P_付保申請日"
                                          }
                                        },
                                        {
                                          "ColumnName": "insurance_cancel_date"
                                        },
                                        {
                                          "ColumnName": "insurance_status_id",
                                          "Value": {
                                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                            "SerializeProperty": "=証明書申請待ちST"
                                          }
                                        }
                                      ]
                                    }
                                  ],
                                  "ID": "0ea32e50-e1e9-4a1d-a164-116bebb96cdc"
                                },
                                {
                                  "CommandList": [
                                    {
                                      "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                                      "TableName": "t_object_insurance",
                                      "ShowConfirm": false,
                                      "ConfirmText": "本当に更新してもよろしいですか？",
                                      "RowsToUpdate": 1,
                                      "RowsToUpdateCondition": {
                                        "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                        "ColumnBindingInfo": {
                                          "TableName": "t_object_insurance",
                                          "ColumnName": "insurance_id"
                                        },
                                        "Value": {
                                          "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                          "SerializeProperty": "=Item.P_付保ID"
                                        }
                                      },
                                      "UpdateValues": [
                                        {
                                          "ColumnName": "insurance_apply_date",
                                          "Value": {
                                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                            "SerializeProperty": "=P_付保申請日"
                                          }
                                        },
                                        {
                                          "ColumnName": "insurance_cancel_date"
                                        },
                                        {
                                          "ColumnName": "insurance_status_id",
                                          "Value": {
                                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                            "SerializeProperty": "=付保申請済みST"
                                          }
                                        }
                                      ]
                                    }
                                  ],
                                  "ID": "44440da7-84fd-41b8-9b1d-b7b49d9fb7a0"
                                }
                              ]
                            }
                          ],
                          "ID": "3471d5fb-40d5-4ac1-bdbb-297cab0dc95f"
                        }
                      ]
                    }
                  ]
                }
              ],
              "ID": "63a0f1c1-a5a1-451c-9a2a-675b95c06996"
            }
          ],
          "Comments": "申請の場合"
        },
        {
          "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
          "ConditionAndCommandPairList": [
            {
              "Condition": {
                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                "param": {
                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                  "ParamObject": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=P_付保解除フラグ"
                  }
                },
                "value": "1"
              },
              "CommandList": [
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "付保申請待ちST",
                  "TableValue": {
                    "TableName": "m_insurance_status",
                    "OnlyGetValue": true,
                    "TableValueType": 0,
                    "BindingInfos": [
                      {
                        "BindingInfo": {
                          "TableName": "m_insurance_status",
                          "ColumnName": "insurance_status_id"
                        },
                        "ColumnName": "insurance_status_id"
                      }
                    ],
                    "SqlCondition": {
                      "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                      "ColumnBindingInfo": {
                        "TableName": "m_insurance_status",
                        "ColumnName": "application_wait_flg"
                      },
                      "Value": "1"
                    }
                  },
                  "ID": "80d03de913a345af85f33a9ec4c60315"
                },
                {
                  "$type": "Forguncy.Model.LoopCommand, ServerDesignerCommon",
                  "LoopInfo": {
                    "$type": "Forguncy.Model.CountLoopInfo, ServerDesignerCommon",
                    "LoopCount": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_付保申請リスト.EditRows"
                    },
                    "LoopIndexParamName": "カウンター",
                    "LoopItemParamName": "Item"
                  },
                  "CommandList": [
                    {
                      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                      "ConditionAndCommandPairList": [
                        {
                          "Condition": {
                            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                            "param": {
                              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                              "ParamObject": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=Item.P_選択フラグ"
                              }
                            },
                            "value": "1"
                          },
                          "CommandList": [
                            {
                              "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                              "TableName": "t_object_insurance",
                              "ShowConfirm": false,
                              "ConfirmText": "本当に更新してもよろしいですか？",
                              "RowsToUpdate": 1,
                              "RowsToUpdateCondition": {
                                "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                "ColumnBindingInfo": {
                                  "TableName": "t_object_insurance",
                                  "ColumnName": "insurance_id"
                                },
                                "Value": {
                                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                  "SerializeProperty": "=Item.P_付保ID"
                                }
                              },
                              "UpdateValues": [
                                {
                                  "ColumnName": "insurance_apply_date"
                                },
                                {
                                  "ColumnName": "insurance_cancel_date"
                                },
                                {
                                  "ColumnName": "insurance_status_id",
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=付保申請待ちST"
                                  }
                                }
                              ]
                            }
                          ],
                          "ID": "35db8846-9746-4d1e-8543-e918792c2816"
                        }
                      ]
                    }
                  ]
                }
              ],
              "ID": "cb95f1f4-7d76-454f-8863-94d853b73bab"
            }
          ],
          "Comments": "解除の場合"
        }
      ]
    },
    {
      "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
      "ErrorCode": "0",
      "CustomReturns": []
    }
  ],
  "Name": "付保申請一括更新"
}