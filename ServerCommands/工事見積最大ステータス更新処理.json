{
  "Name": "工事見積最大ステータス更新処理",
  "Enabled": true,
  "Triggers": [
    {
      "$type": "Forguncy.SaveLoad.InvokeTriggerSaveData, ServerDesignerCommon",
      "Parameters": [
        {
          "Name": "P_申込ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_工事ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_工事完了フラグ",
          "DataValidationInfo": {}
        }
      ]
    }
  ],
  "Commands": [
    {
      "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
      "ParameterName": "見積依頼全件",
      "TableValue": {
        "TableName": "t_object_construction_estimate",
        "BindingInfos": [
          {
            "GUID": "552c017e-9151-4357-8a9e-0cffbcd1ad78",
            "BindingInfo": {
              "TableName": "t_object_construction_estimate",
              "ColumnName": "construction_estimate_status_id",
              "GUID": "64fc2573-7eb7-4505-a1dc-352a872bc97b",
              "RelationBinding": {
                "RelatedTable": "m_construction_estimate_status",
                "RelatedColumn": "construction_estimate_status_id",
                "DisplayColumn": "complete_flg"
              }
            },
            "ColumnName": "工事見積完了フラグ"
          },
          {
            "GUID": "b507f953-9c8d-4e71-9855-5dd026939de7",
            "BindingInfo": {
              "TableName": "t_object_construction_estimate",
              "ColumnName": "construction_estimate_status_id",
              "GUID": "7a06acbe-f3e5-44ff-ac2e-d42b9ad1ce9d",
              "RelationBinding": {
                "RelatedTable": "m_construction_estimate_status",
                "RelatedColumn": "construction_estimate_status_id",
                "DisplayColumn": "order_confirm_flg"
              }
            },
            "ColumnName": "受注確定フラグ"
          },
          {
            "GUID": "9f06a203-b825-44cf-b681-7e33d3c4c996",
            "BindingInfo": {
              "TableName": "t_object_construction_estimate",
              "ColumnName": "construction_estimate_status_id",
              "GUID": "f043bab3-bb2b-4419-aaf9-43850af0e37a",
              "RelationBinding": {
                "RelatedTable": "m_construction_estimate_status",
                "RelatedColumn": "construction_estimate_status_id",
                "DisplayColumn": "order_withdrawn_flg"
              }
            },
            "ColumnName": "手配取り下げフラグ"
          }
        ],
        "SqlCondition": {
          "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
          "ColumnBindingInfo": {
            "TableName": "t_object_construction_estimate",
            "ColumnName": "object_order_id",
            "GUID": "acf7a2ff-c256-4fce-be72-8df23ed7c9f3"
          },
          "Value": {
            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
            "SerializeProperty": "=P_申込ID"
          }
        }
      },
      "ID": "2ed5b3f9f4834762b66a7c386ac3355a"
    },
    {
      "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
      "ParameterName": "工事見積中件数",
      "ParameterValue": "0",
      "ID": "5e9a4e53853c43f1b84ba3c031d2d1e5"
    },
    {
      "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
      "ParameterName": "受注確定件数",
      "ParameterValue": "0",
      "ID": "25c039a2e92d4fd988e544b0352a19ec"
    },
    {
      "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
      "ParameterName": "見積依頼取り下げ件数",
      "ParameterValue": "0",
      "ID": "5564519252ec4f27996f8e158f8ac8de"
    },
    {
      "$type": "Forguncy.Model.LoopCommand, ServerDesignerCommon",
      "LoopInfo": {
        "$type": "Forguncy.Model.CountLoopInfo, ServerDesignerCommon",
        "LoopCount": {
          "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
          "SerializeProperty": "=見積依頼全件"
        },
        "LoopItemParamName": "Item"
      },
      "CommandList": [
        {
          "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
          "ConditionAndCommandPairList": [
            {
              "Condition": {
                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                "param": {
                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                  "ParamObject": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=Item.工事見積完了フラグ"
                  }
                },
                "value": "0"
              },
              "CommandList": [
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "工事見積中件数",
                  "ParameterValue": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=工事見積中件数+1"
                  },
                  "ID": "485beb0a9c1a49c2bda5f196baa1b1bb"
                }
              ],
              "ID": "5064baf4-603c-4543-a5bd-9b918a41dd93"
            },
            {
              "Condition": {
                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                "param": {
                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                  "ParamObject": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=Item.受注確定フラグ"
                  }
                },
                "value": "1"
              },
              "CommandList": [
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "受注確定件数",
                  "ParameterValue": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=受注確定件数+1"
                  },
                  "ID": "b3156aa509d74ac48b79be8910a88073"
                }
              ],
              "ID": "8cfdae7e-2a49-4d53-ba22-6be9bba1e1c2"
            },
            {
              "Condition": {
                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                "param": {
                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                  "ParamObject": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=Item.手配取り下げフラグ"
                  }
                },
                "value": "1"
              },
              "CommandList": [
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "見積依頼取り下げ件数",
                  "ParameterValue": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=見積依頼取り下げ件数+1"
                  },
                  "ID": "3bc586b8f49f4414adb54985fc8615a6"
                }
              ],
              "ID": "2d11a1e2-11ca-4fa5-b4bf-5d73d3a16b80"
            }
          ]
        }
      ],
      "Comments": "件数集計"
    },
    {
      "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
      "ParameterName": "有効見積業者数",
      "ParameterValue": {
        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
        "SerializeProperty": "=工事見積中件数+受注確定件数"
      },
      "ID": "a28cc81af0ce494491fdfce375cb90ba"
    },
    {
      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
      "ConditionAndCommandPairList": [
        {
          "Condition": {
            "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
            "SubConditions": [
              {
                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                "param": {
                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                  "ParamObject": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=工事見積中件数"
                  }
                },
                "value": "0",
                "compareType": 2
              },
              {
                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                "param": {
                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                  "ParamObject": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=受注確定件数"
                  }
                },
                "value": "0"
              },
              {
                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                "param": {
                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                  "ParamObject": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=P_工事完了フラグ"
                  }
                },
                "value": "0"
              }
            ]
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "最大見積ST",
              "TableValue": {
                "TableName": "t_object_construction_estimate",
                "TableValueType": 1,
                "BindingInfos": [
                  {
                    "GUID": "8efde9cc-af1c-4d58-b0a2-918300b64b53",
                    "BindingInfo": {
                      "TableName": "t_object_construction_estimate",
                      "ColumnName": "construction_estimate_status_id",
                      "GUID": "dbe86893-9836-4807-9321-109c75a9d8f8",
                      "RelationBinding": {
                        "RelatedTable": "m_construction_estimate_status",
                        "RelatedColumn": "construction_estimate_status_id",
                        "DisplayColumn": "construction_status_id"
                      }
                    },
                    "ColumnName": "工事ステータスID"
                  },
                  {
                    "GUID": "30e09d31-dadf-4099-af1b-e6894564b9bd",
                    "BindingInfo": {
                      "TableName": "t_object_construction_estimate",
                      "ColumnName": "construction_estimate_status_id",
                      "GUID": "499efd67-dfe4-4d24-b7db-5d6a07ab2301",
                      "RelationBinding": {
                        "RelatedTable": "m_construction_estimate_status",
                        "RelatedColumn": "construction_estimate_status_id",
                        "DisplayColumn": "construction_status_id",
                        "NextRelationBinding": {
                          "RelatedTable": "m_construction_status",
                          "RelatedColumn": "construction_status_id",
                          "DisplayColumn": "order_status_id"
                        }
                      }
                    },
                    "ColumnName": "申込ステータスID"
                  }
                ],
                "SqlCondition": {
                  "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                  "SubConditions": [
                    {
                      "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                      "ColumnBindingInfo": {
                        "TableName": "t_object_construction_estimate",
                        "ColumnName": "object_order_id",
                        "GUID": "97d2231b-4ce3-4bb9-82e5-aa58921b1344"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_申込ID"
                      }
                    },
                    {
                      "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                      "ColumnBindingInfo": {
                        "TableName": "t_object_construction_estimate",
                        "ColumnName": "construction_estimate_status_id",
                        "GUID": "c81d29fe-e95e-461c-aec7-01f773299d48",
                        "RelationBinding": {
                          "RelatedTable": "m_construction_estimate_status",
                          "RelatedColumn": "construction_estimate_status_id",
                          "DisplayColumn": "complete_flg"
                        }
                      },
                      "Value": "0"
                    }
                  ]
                },
                "TopCount": "1",
                "OrderBySqlCondition": {
                  "OrderByColumns": [
                    {
                      "ColumnBindingInfo": {
                        "TableName": "t_object_construction_estimate",
                        "ColumnName": "construction_estimate_status_id",
                        "GUID": "0c769bbe-9565-4438-a0be-5e74a5774be8",
                        "RelationBinding": {
                          "RelatedTable": "m_construction_estimate_status",
                          "RelatedColumn": "construction_estimate_status_id",
                          "DisplayColumn": "sort_no"
                        }
                      },
                      "Order": 1
                    }
                  ]
                }
              },
              "ID": "3efca92d674a4b4fb2a1991070dded9e"
            },
            {
              "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
              "TableName": "t_object_construction",
              "ShowConfirm": false,
              "RowsToUpdate": 1,
              "RowsToUpdateCondition": {
                "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                "ColumnBindingInfo": {
                  "TableName": "t_object_construction",
                  "ColumnName": "construction_id",
                  "GUID": "fe958668-26c7-450b-ac04-652d557ee111"
                },
                "Value": {
                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                  "SerializeProperty": "=P_工事ID"
                }
              },
              "UpdateBindingValues": [
                {
                  "BindingInfo": {
                    "TableName": "t_object_construction",
                    "ColumnName": "construction_status_id",
                    "GUID": "8799990f-ad25-4450-b0bb-cd5c45b35de7"
                  },
                  "Value": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=最大見積ST.工事ステータスID"
                  }
                },
                {
                  "BindingInfo": {
                    "TableName": "t_object_construction",
                    "ColumnName": "order_complete_date",
                    "GUID": "1ced35ac-9e4a-4a30-910e-931835e230b3"
                  }
                },
                {
                  "BindingInfo": {
                    "TableName": "t_object_construction",
                    "ColumnName": "construction_customer_id",
                    "GUID": "bceb793e-edaa-4c3e-88a7-27985d22da1a"
                  }
                },
                {
                  "BindingInfo": {
                    "TableName": "t_object_construction",
                    "ColumnName": "construction_method_id",
                    "GUID": "1b164a73-786d-4e17-8523-caadd207ac76"
                  }
                }
              ]
            },
            {
              "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
              "TableName": "t_object_order",
              "ShowConfirm": false,
              "RowsToUpdate": 1,
              "RowsToUpdateCondition": {
                "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                "SubConditions": [
                  {
                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                    "ColumnBindingInfo": {
                      "TableName": "t_object_order",
                      "ColumnName": "object_order_id",
                      "GUID": "685ffead-e719-4494-b235-0c9d1ac602a5"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_申込ID"
                    }
                  },
                  {
                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                    "CompareType": 1,
                    "ColumnBindingInfo": {
                      "TableName": "t_object_order",
                      "ColumnName": "order_status_id",
                      "GUID": "6fd2aea0-450f-4ea7-941d-ebac65c33adc"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=最大見積ST.申込ステータスID"
                    }
                  }
                ]
              },
              "UpdateBindingValues": [
                {
                  "BindingInfo": {
                    "TableName": "t_object_order",
                    "ColumnName": "order_status_id",
                    "GUID": "9929c3c1-1ccf-405d-981b-b7a4ece9b8e4"
                  },
                  "Value": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=最大見積ST.申込ステータスID"
                  }
                }
              ]
            }
          ],
          "ID": "5cadd719-b3c1-4f5b-acbe-d670c9d8ba4a"
        },
        {
          "CommandList": [
            {
              "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
              "ConditionAndCommandPairList": [
                {
                  "Condition": {
                    "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                    "SubConditions": [
                      {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=見積依頼全件.Count"
                          }
                        },
                        "value": {
                          "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                          "SerializeProperty": "=見積依頼取り下げ件数"
                        }
                      },
                      {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=P_工事完了フラグ"
                          }
                        },
                        "value": "0"
                      },
                      {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=見積依頼取り下げ件数"
                          }
                        },
                        "value": "0",
                        "compareType": 2
                      }
                    ]
                  },
                  "CommandList": [
                    {
                      "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                      "ParameterName": "工事_手配取り下げST",
                      "TableValue": {
                        "TableName": "m_construction_status",
                        "OnlyGetValue": true,
                        "TableValueType": 0,
                        "BindingInfos": [
                          {
                            "GUID": "241e8c38-05fd-49a9-9636-d1e0f8cb6534",
                            "BindingInfo": {
                              "TableName": "m_construction_status",
                              "ColumnName": "construction_status_id",
                              "GUID": "36c7efed-950f-426c-a4ec-47755ec07ffd"
                            },
                            "ColumnName": "construction_status_id"
                          }
                        ],
                        "SqlCondition": {
                          "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                          "ColumnBindingInfo": {
                            "TableName": "m_construction_status",
                            "ColumnName": "arrangement_withdrawal_flg",
                            "GUID": "fca6d069-250d-48fe-82e5-73c513ef70a8"
                          },
                          "Value": "1"
                        }
                      },
                      "ID": "3ccdb3c122fe4d5cadc89269bed85020"
                    },
                    {
                      "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                      "TableName": "t_object_construction",
                      "ShowConfirm": false,
                      "RowsToUpdate": 1,
                      "RowsToUpdateCondition": {
                        "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                        "SubConditions": [
                          {
                            "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                            "ColumnBindingInfo": {
                              "TableName": "t_object_construction",
                              "ColumnName": "construction_id",
                              "GUID": "dac031a9-1b89-453b-a8ed-5136a351e16a"
                            },
                            "Value": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=P_工事ID"
                            }
                          },
                          {
                            "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                            "CompareType": 1,
                            "ColumnBindingInfo": {
                              "TableName": "t_object_construction",
                              "ColumnName": "construction_status_id",
                              "GUID": "7575f1e8-d2f5-43ad-af04-0f5305bde6ff"
                            },
                            "Value": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=工事_手配取り下げST"
                            }
                          }
                        ]
                      },
                      "UpdateBindingValues": [
                        {
                          "BindingInfo": {
                            "TableName": "t_object_construction",
                            "ColumnName": "construction_status_id",
                            "GUID": "06986dc2-3b88-4b23-bb12-ff45a86c849c"
                          },
                          "Value": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=工事_手配取り下げST"
                          }
                        }
                      ]
                    }
                  ],
                  "ID": "f6a0d7dc-8ada-4926-907e-714d48cc9778"
                },
                {
                  "Condition": {
                    "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                    "SubConditions": [
                      {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=有効見積業者数"
                          }
                        },
                        "value": "0"
                      },
                      {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=P_工事完了フラグ"
                          }
                        },
                        "value": "0"
                      },
                      {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=見積依頼全件.Count"
                          }
                        },
                        "value": "0",
                        "compareType": 2
                      }
                    ]
                  },
                  "CommandList": [
                    {
                      "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                      "ParameterName": "工事_工事初期ST",
                      "TableValue": {
                        "TableName": "m_construction_status",
                        "TableValueType": 1,
                        "BindingInfos": [
                          {
                            "GUID": "1c97f60d-eb21-48ac-90d4-9b96b2de30a1",
                            "BindingInfo": {
                              "TableName": "m_construction_status",
                              "ColumnName": "construction_status_id",
                              "GUID": "17697411-b269-4ee9-a085-8e44a9377d3c"
                            },
                            "ColumnName": "工事ステータスID"
                          },
                          {
                            "GUID": "9c573b70-852d-4284-8022-59a83a89d0a1",
                            "BindingInfo": {
                              "TableName": "m_construction_status",
                              "ColumnName": "order_status_id",
                              "GUID": "1993e985-ca38-4233-826d-e4994553d03c"
                            },
                            "ColumnName": "申込ステータスID"
                          }
                        ],
                        "SqlCondition": {
                          "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                          "ColumnBindingInfo": {
                            "TableName": "m_construction_status",
                            "ColumnName": "construction_initial_status_flg",
                            "GUID": "461c0a57-4f13-4bf1-9407-dc6b1f46f990"
                          },
                          "Value": "1"
                        },
                        "NullFormulaValueQueryPolicy": 0
                      },
                      "ID": "b804320c8ccd4c7395f81b96eae95c53"
                    },
                    {
                      "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                      "TableName": "t_object_construction",
                      "ShowConfirm": false,
                      "RowsToUpdate": 1,
                      "RowsToUpdateCondition": {
                        "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                        "SubConditions": [
                          {
                            "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                            "ColumnBindingInfo": {
                              "TableName": "t_object_construction",
                              "ColumnName": "construction_id",
                              "GUID": "df5528e4-e432-426e-b62f-3d076047d788"
                            },
                            "Value": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=P_工事ID"
                            }
                          },
                          {
                            "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                            "CompareType": 1,
                            "ColumnBindingInfo": {
                              "TableName": "t_object_construction",
                              "ColumnName": "construction_status_id",
                              "GUID": "5ca577a5-106c-478e-8883-c2b2297aaecd"
                            },
                            "Value": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=工事_工事初期ST.工事ステータスID"
                            }
                          }
                        ]
                      },
                      "UpdateBindingValues": [
                        {
                          "BindingInfo": {
                            "TableName": "t_object_construction",
                            "ColumnName": "construction_status_id",
                            "GUID": "83113fd4-4f62-4335-ad08-9999012825eb"
                          },
                          "Value": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=工事_工事初期ST.工事ステータスID"
                          }
                        }
                      ]
                    },
                    {
                      "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                      "TableName": "t_object_order",
                      "ShowConfirm": false,
                      "RowsToUpdate": 1,
                      "RowsToUpdateCondition": {
                        "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                        "SubConditions": [
                          {
                            "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                            "ColumnBindingInfo": {
                              "TableName": "t_object_order",
                              "ColumnName": "object_order_id",
                              "GUID": "9e4622e6-b579-4b87-a939-60ba78b064b6"
                            },
                            "Value": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=P_申込ID"
                            }
                          },
                          {
                            "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                            "CompareType": 1,
                            "ColumnBindingInfo": {
                              "TableName": "t_object_order",
                              "ColumnName": "order_status_id",
                              "GUID": "c3491cad-223e-4cac-aca6-e78003e721db"
                            },
                            "Value": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=工事_工事初期ST.申込ステータスID"
                            }
                          }
                        ]
                      },
                      "UpdateBindingValues": [
                        {
                          "BindingInfo": {
                            "TableName": "t_object_order",
                            "ColumnName": "order_status_id",
                            "GUID": "7df508ec-f9a4-475f-843b-1a23d5e28e8b"
                          },
                          "Value": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=工事_工事初期ST.申込ステータスID"
                          }
                        }
                      ]
                    }
                  ],
                  "ID": "15c40498-b969-4cc0-bd2c-0c8165abaacd"
                }
              ],
              "Comments": "全件取下げだった場合"
            }
          ],
          "ID": "081c17f8-3a86-4a39-b860-b5d09d9d78d2"
        }
      ],
      "Comments": "工事情報に見積の最大STをセットする"
    },
    {
      "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
      "TableName": "t_object_construction",
      "ShowConfirm": false,
      "RowsToUpdate": 1,
      "RowsToUpdateCondition": {
        "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
        "SubConditions": [
          {
            "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
            "ColumnBindingInfo": {
              "TableName": "t_object_construction",
              "ColumnName": "construction_id",
              "GUID": "3f5c0ef6-474f-4ff1-9b17-7a298e031857"
            },
            "Value": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=P_工事ID"
            }
          },
          {
            "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
            "SubConditions": [
              {
                "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                "CompareType": 1,
                "ColumnBindingInfo": {
                  "TableName": "t_object_construction",
                  "ColumnName": "all_estimate_count",
                  "GUID": "aa249065-a8b2-492a-9748-eddc4497170f"
                },
                "Value": {
                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                  "SerializeProperty": "=見積依頼全件.Count"
                },
                "LeftBracket": 1
              },
              {
                "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                "CompareType": 1,
                "ColumnBindingInfo": {
                  "TableName": "t_object_construction",
                  "ColumnName": "valid_estimate_count",
                  "GUID": "2fa1ed55-dfb7-41c4-8526-17b6cab86940"
                },
                "Value": {
                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                  "SerializeProperty": "=有効見積業者数"
                },
                "RightBracket": 1
              }
            ],
            "RelationType": 1
          }
        ]
      },
      "UpdateBindingValues": [
        {
          "BindingInfo": {
            "TableName": "t_object_construction",
            "ColumnName": "all_estimate_count",
            "GUID": "5ca7dffc-6cae-4aa2-b91e-e83d186a17a9"
          },
          "Value": {
            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
            "SerializeProperty": "=見積依頼全件.Count"
          }
        },
        {
          "BindingInfo": {
            "TableName": "t_object_construction",
            "ColumnName": "valid_estimate_count",
            "GUID": "95db4e7f-3a29-433b-b9ba-74d8b9091fbd"
          },
          "Value": {
            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
            "SerializeProperty": "=有効見積業者数"
          }
        }
      ]
    },
    {
      "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
      "CustomReturns": [
        {
          "ReturnPropertyName": "R_有効見積業者数",
          "Value": {
            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
            "SerializeProperty": "=有効見積業者数"
          }
        }
      ]
    }
  ],
  "ReturnProperties": [
    {
      "Name": "R_有効見積業者数"
    }
  ]
}