{
  "Name": "スケジュールメール登録",
  "Enabled": true,
  "Triggers": [
    {
      "$type": "Forguncy.SaveLoad.PostRequestTriggerSaveData, ServerDesignerCommon",
      "Permission": {
        "PermissionData": {
          "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionData, Forguncy.RbacPermission.Core",
          "permissionResource": {
            "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionResource, Forguncy.RbacPermission.Core"
          },
          "permissionBindings": [
            {
              "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionBinding, Forguncy.RbacPermission.Core",
              "roleNames": [
                "FGC_LoginUser"
              ]
            }
          ]
        }
      },
      "Parameters": [
        {
          "Name": "P_スケジュールメールID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_申込ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_送信元区分",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_宛先区分",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_差出人アドレス",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_ユーザーグループKEYs",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_宛先TO",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_宛先CC",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_件名",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_本文",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_タスクID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_送信予定日",
          "DataValidationInfo": {}
        }
      ]
    }
  ],
  "Commands": [
    {
      "$type": "Forguncy.Model.ServerTransactionCommand, ServerDesignerCommon",
      "CommandList": [
        {
          "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
          "ConditionAndCommandPairList": [
            {
              "Condition": {
                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                "param": {
                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                  "ParamObject": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=P_スケジュールメールID"
                  }
                },
                "value": "%Null%"
              },
              "CommandList": [
                {
                  "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                  "TableName": "t_schedule_mail",
                  "UpdateType": "add",
                  "ShowConfirm": false,
                  "UpdateBindingValues": [
                    {
                      "BindingInfo": {
                        "TableName": "t_schedule_mail",
                        "ColumnName": "object_order_id",
                        "GUID": "648ac946-7408-4e8f-b784-197e0e42fe52"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_申込ID"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_schedule_mail",
                        "ColumnName": "sender_type",
                        "GUID": "1a904296-3f72-4b9a-940c-53c5ae32ea4a"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_送信元区分"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_schedule_mail",
                        "ColumnName": "post_type",
                        "GUID": "b3fc75f1-41cc-495e-8c4b-cc14b39af049"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_宛先区分"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_schedule_mail",
                        "ColumnName": "sender_address",
                        "GUID": "fbb8b871-f423-4941-9ae2-9a17d0ca2a57"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_差出人アドレス"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_schedule_mail",
                        "ColumnName": "user_group_keys",
                        "GUID": "5fd561b5-83a0-468b-86e1-4e7071d6d25c"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_ユーザーグループKEYs"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_schedule_mail",
                        "ColumnName": "to",
                        "GUID": "ac848101-74c3-4969-af46-ff714c8304d8"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_宛先TO"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_schedule_mail",
                        "ColumnName": "cc",
                        "GUID": "2a86cbb2-1557-43c4-b88c-28360f236d8e"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_宛先CC"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_schedule_mail",
                        "ColumnName": "subject",
                        "GUID": "e6da6190-e7db-45d2-851e-a83e28f04fb6"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_件名"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_schedule_mail",
                        "ColumnName": "body",
                        "GUID": "35916d33-9bd4-4f12-8c50-13450406db6a"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_本文"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_schedule_mail",
                        "ColumnName": "send_schedule_date",
                        "GUID": "7c99b622-eaa0-4b58-a509-0767d1e99bf9"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_送信予定日"
                      }
                    }
                  ],
                  "ParamNameToSaveNewRowValue": "Newスケ"
                },
                {
                  "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                  "ConditionAndCommandPairList": [
                    {
                      "Condition": {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=P_タスクID"
                          }
                        },
                        "value": "%Null%",
                        "compareType": 1
                      },
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                          "TableName": "t_task",
                          "ShowConfirm": false,
                          "RowsToUpdate": 1,
                          "RowsToUpdateCondition": {
                            "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                            "ColumnBindingInfo": {
                              "TableName": "t_task",
                              "ColumnName": "task_id",
                              "GUID": "22b890f8-76d4-42f8-8343-604df8bb1348"
                            },
                            "Value": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=P_タスクID"
                            }
                          },
                          "UpdateBindingValues": [
                            {
                              "BindingInfo": {
                                "TableName": "t_task",
                                "ColumnName": "schedule_mail_id",
                                "GUID": "8e954ddf-97f4-4c7a-92b6-b25cd6065d52"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=Newスケ.スケジュールメールID"
                              }
                            }
                          ]
                        }
                      ],
                      "ID": "1a0e6722-6d59-48e1-98b1-e4dc2957af68"
                    }
                  ]
                }
              ],
              "ID": "06d85025-c942-4d16-b05b-e46083ca5a0b"
            },
            {
              "CommandList": [
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "スケジュールメール",
                  "TableValue": {
                    "TableName": "t_schedule_mail",
                    "TableValueType": 1,
                    "BindingInfos": [
                      {
                        "GUID": "09f05f85-7743-4c06-a2bb-5176ecd5226c",
                        "BindingInfo": {
                          "TableName": "t_schedule_mail",
                          "ColumnName": "send_completed_flg",
                          "GUID": "8610fde2-05e1-4e9d-9381-96487eb22f6f"
                        },
                        "ColumnName": "送信完了フラグ"
                      }
                    ],
                    "SqlCondition": {
                      "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                      "ColumnBindingInfo": {
                        "TableName": "t_schedule_mail",
                        "ColumnName": "schedule_mail_id",
                        "GUID": "02fe46dd-2cfa-4c41-9261-00f52366a8a1"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=P_スケジュールメールID"
                      }
                    }
                  },
                  "ID": "48a2cb66e2b14a65a2588436945a2aaa"
                },
                {
                  "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                  "ConditionAndCommandPairList": [
                    {
                      "Condition": {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=スケジュールメール.送信完了フラグ"
                          }
                        },
                        "value": "1"
                      },
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                          "TableName": "t_schedule_mail",
                          "UpdateType": "add",
                          "ShowConfirm": false,
                          "UpdateBindingValues": [
                            {
                              "BindingInfo": {
                                "TableName": "t_schedule_mail",
                                "ColumnName": "object_order_id",
                                "GUID": "66f641c4-0504-41ca-a87e-0a3f6f125cfd"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=P_申込ID"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_schedule_mail",
                                "ColumnName": "sender_type",
                                "GUID": "9bd0d077-7997-4813-9db7-cdc2a168e364"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=P_送信元区分"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_schedule_mail",
                                "ColumnName": "post_type",
                                "GUID": "61e1d958-e9a7-4c12-8ee9-7a20f086f27f"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=P_宛先区分"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_schedule_mail",
                                "ColumnName": "sender_address",
                                "GUID": "819be9ac-3869-454b-9562-181be381a5d7"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=P_差出人アドレス"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_schedule_mail",
                                "ColumnName": "user_group_keys",
                                "GUID": "4cf8cc1e-5e79-48b7-8ed4-9520a3b93d0e"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=P_ユーザーグループKEYs"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_schedule_mail",
                                "ColumnName": "to",
                                "GUID": "18a94be8-69ab-4386-b7be-06e1b4214e31"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=P_宛先TO"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_schedule_mail",
                                "ColumnName": "cc",
                                "GUID": "90b1a721-442b-44fe-a8f4-49be9071d179"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=P_宛先CC"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_schedule_mail",
                                "ColumnName": "subject",
                                "GUID": "1e4b54f0-666a-4b03-bebb-393784783b8d"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=P_件名"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_schedule_mail",
                                "ColumnName": "body",
                                "GUID": "5dc4d8a2-09d1-4fae-8d00-ad23a2112e70"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=P_本文"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_schedule_mail",
                                "ColumnName": "send_schedule_date",
                                "GUID": "c909e9e4-df90-4fcd-a82f-96108e2dbb52"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=P_送信予定日"
                              }
                            }
                          ],
                          "ParamNameToSaveNewRowValue": "Newスケ"
                        },
                        {
                          "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                          "ConditionAndCommandPairList": [
                            {
                              "Condition": {
                                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                                "param": {
                                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                                  "ParamObject": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=P_タスクID"
                                  }
                                },
                                "value": "%Null%",
                                "compareType": 1
                              },
                              "CommandList": [
                                {
                                  "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                                  "TableName": "t_task",
                                  "ShowConfirm": false,
                                  "RowsToUpdate": 1,
                                  "RowsToUpdateCondition": {
                                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                    "ColumnBindingInfo": {
                                      "TableName": "t_task",
                                      "ColumnName": "task_id",
                                      "GUID": "eeb5d178-4f09-428f-9f75-7098999c4781"
                                    },
                                    "Value": {
                                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                      "SerializeProperty": "=P_タスクID"
                                    }
                                  },
                                  "UpdateBindingValues": [
                                    {
                                      "BindingInfo": {
                                        "TableName": "t_task",
                                        "ColumnName": "schedule_mail_id",
                                        "GUID": "4339ada1-37d0-4f01-8fdd-acdb73155917"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=Newスケ.スケジュールメールID"
                                      }
                                    }
                                  ]
                                }
                              ],
                              "ID": "9636dba7-670b-4511-92ad-65341c9b0306"
                            }
                          ]
                        }
                      ],
                      "ID": "bee82de8-cd7e-48c0-80b4-1bccc5551b69"
                    },
                    {
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                          "ConditionAndCommandPairList": [
                            {
                              "Condition": {
                                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                                "param": {
                                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                                  "ParamObject": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=P_タスクID"
                                  }
                                },
                                "value": "%Null%"
                              },
                              "CommandList": [
                                {
                                  "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                                  "TableName": "t_schedule_mail",
                                  "UpdateType": "delete",
                                  "ShowConfirm": true,
                                  "ConfirmText": "本当に削除してもよろしいですか？",
                                  "RowsToUpdate": 1,
                                  "RowsToUpdateCondition": {
                                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                    "ColumnBindingInfo": {
                                      "TableName": "t_schedule_mail",
                                      "ColumnName": "schedule_mail_id",
                                      "GUID": "cfa36369-22c9-4f70-ad06-db329d6d36a1"
                                    },
                                    "Value": {
                                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                      "SerializeProperty": "=P_スケジュールメールID"
                                    }
                                  }
                                }
                              ],
                              "ID": "311151c4-5e98-4a3b-b0ac-cbf813382463"
                            },
                            {
                              "CommandList": [
                                {
                                  "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                                  "TableName": "t_schedule_mail",
                                  "ShowConfirm": false,
                                  "RowsToUpdate": 1,
                                  "RowsToUpdateCondition": {
                                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                    "ColumnBindingInfo": {
                                      "TableName": "t_schedule_mail",
                                      "ColumnName": "schedule_mail_id",
                                      "GUID": "26ed4c67-87d1-49a7-85b2-fb0f31b37030"
                                    },
                                    "Value": {
                                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                      "SerializeProperty": "=P_スケジュールメールID"
                                    }
                                  },
                                  "UpdateBindingValues": [
                                    {
                                      "BindingInfo": {
                                        "TableName": "t_schedule_mail",
                                        "ColumnName": "sender_type",
                                        "GUID": "3655fde8-5584-4970-b688-45651337818d"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=P_送信元区分"
                                      }
                                    },
                                    {
                                      "BindingInfo": {
                                        "TableName": "t_schedule_mail",
                                        "ColumnName": "post_type",
                                        "GUID": "5f59106d-7aad-4a61-9a7a-c314b9a2a434"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=P_宛先区分"
                                      }
                                    },
                                    {
                                      "BindingInfo": {
                                        "TableName": "t_schedule_mail",
                                        "ColumnName": "sender_address",
                                        "GUID": "b3178f2a-f451-49f6-91b3-d33395edc267"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=P_差出人アドレス"
                                      }
                                    },
                                    {
                                      "BindingInfo": {
                                        "TableName": "t_schedule_mail",
                                        "ColumnName": "user_group_keys",
                                        "GUID": "0d72e2c3-b7e8-4800-b0ed-77ff770ffa9b"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=P_ユーザーグループKEYs"
                                      }
                                    },
                                    {
                                      "BindingInfo": {
                                        "TableName": "t_schedule_mail",
                                        "ColumnName": "to",
                                        "GUID": "24742cfa-0999-4b91-9b97-711c91a07b22"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=P_宛先TO"
                                      }
                                    },
                                    {
                                      "BindingInfo": {
                                        "TableName": "t_schedule_mail",
                                        "ColumnName": "cc",
                                        "GUID": "e958eedc-f2e7-45ba-a0e8-cc042e6a168b"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=P_宛先CC"
                                      }
                                    },
                                    {
                                      "BindingInfo": {
                                        "TableName": "t_schedule_mail",
                                        "ColumnName": "subject",
                                        "GUID": "6c8d1ac6-0eb3-4910-a6fe-be3bd0667fa5"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=P_件名"
                                      }
                                    },
                                    {
                                      "BindingInfo": {
                                        "TableName": "t_schedule_mail",
                                        "ColumnName": "body",
                                        "GUID": "5a5c8ee0-4950-4614-9f81-a6c0d8bf394f"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=P_本文"
                                      }
                                    },
                                    {
                                      "BindingInfo": {
                                        "TableName": "t_schedule_mail",
                                        "ColumnName": "send_schedule_date",
                                        "GUID": "d69051dc-dcda-4394-9aa6-25e224dbbcf0"
                                      },
                                      "Value": {
                                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                        "SerializeProperty": "=P_送信予定日"
                                      }
                                    }
                                  ],
                                  "ParamNameToSaveNewRowValue": "Newスケ",
                                  "Comments": "送信完了前は内容を更新"
                                }
                              ],
                              "ID": "135570de-7d7b-4ddd-bf40-0c475388e81e"
                            }
                          ]
                        }
                      ],
                      "ID": "c773d5c0-6bb9-4306-9bd0-60f69aff6d97"
                    }
                  ]
                }
              ],
              "ID": "f68293f7-e788-4fdd-8d32-87fd9a01145d"
            }
          ]
        },
        {
          "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
          "ErrorCode": "0"
        }
      ]
    }
  ]
}