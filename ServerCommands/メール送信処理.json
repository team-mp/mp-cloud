{
  "Name": "メール送信処理",
  "Enabled": true,
  "Triggers": [
    {
      "$type": "Forguncy.SaveLoad.PostRequestTriggerSaveData, ServerDesignerCommon",
      "Permission": {
        "PermissionData": {
          "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionData, Forguncy.RbacPermission.Core",
          "permissionResource": {
            "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionResource, Forguncy.RbacPermission.Core"
          },
          "permissionBindings": [
            {
              "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionBinding, Forguncy.RbacPermission.Core",
              "roleNames": [
                "FGC_LoginUser"
              ]
            }
          ]
        }
      },
      "Parameters": [
        {
          "Name": "P_差出人アドレス",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_送信元区分",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_宛先区分",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_TOユーザーIDs",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_TO追加アドレス",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_宛先TO",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_CCユーザーIDs",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_CC追加アドレス",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_宛先CC",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_件名",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_本文",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_添付ファイル",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_請求番号",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_申込ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_調査ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_測量ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_解析ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_転圧ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_工事見積ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_工事ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_保証ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_外販ID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_送信ユーザーID",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_ダウンロードリンクフラグ",
          "DataValidationInfo": {}
        },
        {
          "Name": "P_filekey",
          "DataValidationInfo": {}
        }
      ]
    }
  ],
  "Commands": [
    {
      "$type": "Forguncy.Model.ServerTransactionCommand, ServerDesignerCommon",
      "CommandList": [
        {
          "$type": "Forguncy.Model.RequestServerCommand, ServerDesignerCommon",
          "ServerCommandName": "登録更新ラベル取得",
          "ReturnPropertiesTo": [
            {
              "ResultPropertyName": "R_ラベル名",
              "ResultTo": {
                "SerializeProperty": "送信者ラベル"
              }
            },
            {
              "ResultPropertyName": "R_外部ユーザーフラグ"
            }
          ],
          "RefreshAfterFinish": true,
          "CheckDataValidation": true
        },
        {
          "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
          "ConditionAndCommandPairList": [
            {
              "Condition": {
                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                "param": {
                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                  "ParamObject": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=P_差出人アドレス"
                  }
                },
                "value": "%Null%",
                "compareType": 1
              },
              "CommandList": [
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "差出人メールアドレス",
                  "ParameterValue": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=P_差出人アドレス"
                  },
                  "ID": "25a670ef5c144ca3af70a6175b851bd6"
                }
              ],
              "ID": "8fe3551b-bad9-425b-a2ab-3dad7233d814"
            },
            {
              "CommandList": [
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "差出人メールアドレス",
                  "TableValue": {
                    "TableName": "m_environment",
                    "OnlyGetValue": true,
                    "TableValueType": 0,
                    "BindingInfos": [
                      {
                        "GUID": "98e2ef62-a46f-4d6f-9056-388ed3900b58",
                        "BindingInfo": {
                          "TableName": "m_environment",
                          "ColumnName": "mailsender_address",
                          "GUID": "84fce280-adb7-442a-93f1-215c80d18e75"
                        },
                        "ColumnName": "mailsender_address"
                      }
                    ],
                    "SqlCondition": {
                      "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                      "ColumnBindingInfo": {
                        "TableName": "m_environment",
                        "ColumnName": "ID",
                        "GUID": "26838ff4-abf9-4c38-adde-f8fbbebf7279"
                      },
                      "Value": "1"
                    }
                  },
                  "ID": "802eb92cc2bc48d48abf0d316e891cc5"
                }
              ],
              "ID": "86569e4d-45eb-4d84-818b-2ea4ebe223c2"
            }
          ]
        },
        {
          "$type": "Forguncy.Model.CatchExceptionCommand, ServerDesignerCommon",
          "TryCommandPart": {
            "CommandList": [
              {
                "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                "ParameterName": "添付ファイル文字列",
                "ID": "aec97dbbe78e4eeab6f02af48f761400"
              },
              {
                "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                "ParameterName": "添付ファイル数",
                "ParameterValue": {
                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                  "SerializeProperty": "=LEN(P_添付ファイル)-LEN(SUBSTITUTE(P_添付ファイル,\"|\",\"\"))"
                },
                "ID": "42fc8d9737f945d2b4813b9d429e8219"
              },
              {
                "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                "ParameterName": "ファイル名開始位置",
                "ParameterValue": "1",
                "ID": "f0f9261cef784e64b5706557046d7de7"
              },
              {
                "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                "ParameterName": "環境変数",
                "TableValue": {
                  "TableName": "m_environment",
                  "TableValueType": 1,
                  "BindingInfos": [
                    {
                      "GUID": "9e9797e9-aea8-4b91-9f8e-628c61ef49bd",
                      "BindingInfo": {
                        "TableName": "m_environment",
                        "ColumnName": "file_temp_path",
                        "GUID": "73b07991-3c0e-4d7c-8ab8-e229b4715a82"
                      },
                      "ColumnName": "ファイルTempパス"
                    },
                    {
                      "GUID": "a8aaf923-1d3b-4d83-b3c1-e8183505de2d",
                      "BindingInfo": {
                        "TableName": "m_environment",
                        "ColumnName": "app_name",
                        "GUID": "8b7171bc-74d3-4f37-a564-d3fbb431d646"
                      },
                      "ColumnName": "アプリ名"
                    }
                  ],
                  "SqlCondition": {
                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                    "ColumnBindingInfo": {
                      "TableName": "m_environment",
                      "ColumnName": "ID",
                      "GUID": "20762d4a-c5aa-4149-b0ec-0c05eb099652"
                    },
                    "Value": "1"
                  }
                },
                "ID": "cf6686de06f9447c9f11a13ce5418cd8"
              },
              {
                "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                "ParameterName": "Tempパス名",
                "ParameterValue": {
                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                  "SerializeProperty": "=環境変数.ファイルTempパス&環境変数.アプリ名&\"\\Temp\\\""
                },
                "ID": "bcb20ab776bd4c72bc3b1f49ff6f5e34"
              },
              {
                "$type": "Forguncy.Model.LoopCommand, ServerDesignerCommon",
                "LoopInfo": {
                  "$type": "Forguncy.Model.CountLoopInfo, ServerDesignerCommon",
                  "LoopCount": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=添付ファイル数"
                  },
                  "LoopIndexParamName": "カウンター",
                  "LoopItemParamName": "Item"
                },
                "CommandList": [
                  {
                    "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                    "ParameterName": "文字数",
                    "ParameterValue": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=IFERROR(FIND(\"|\",P_添付ファイル,ファイル名開始位置),1000)"
                    },
                    "ID": "972b371c10cd4fabba4538e036823730"
                  },
                  {
                    "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                    "ParameterName": "取得ファイル名",
                    "ParameterValue": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=MID(P_添付ファイル,ファイル名開始位置,文字数-ファイル名開始位置)"
                    },
                    "ID": "fd02108d22ad4759b525499191d7952e"
                  },
                  {
                    "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                    "ConditionAndCommandPairList": [
                      {
                        "Condition": {
                          "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                          "param": {
                            "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                            "ParamObject": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=取得ファイル名"
                            }
                          },
                          "value": "%Null%",
                          "compareType": 1
                        },
                        "CommandList": [
                          {
                            "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                            "ConditionAndCommandPairList": [
                              {
                                "Condition": {
                                  "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                                  "param": {
                                    "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                                    "ParamObject": {
                                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                      "SerializeProperty": "=P_ダウンロードリンクフラグ"
                                    }
                                  },
                                  "value": "1"
                                },
                                "CommandList": [
                                  {
                                    "$type": "OperateFilesCommand.CreateFolderCommand, OperateFilesCommand",
                                    "FolderPath": {
                                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                      "SerializeProperty": "=Download_Server_Path&P_filekey"
                                    }
                                  },
                                  {
                                    "$type": "Forguncy.Model.Commands.ServerImportExportCSVCommand, ServerDesignerCommon",
                                    "CSVOperation": 1,
                                    "FilePath": {
                                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                      "SerializeProperty": "=Download_Server_Path&P_filekey"
                                    },
                                    "TableName": "m_environment",
                                    "Columns": [
                                      {
                                        "BindingColumn": {
                                          "TableName": "m_environment",
                                          "ColumnName": "ID",
                                          "GUID": "41937ef1-841a-4ce1-8cab-bd48ab1f6bda"
                                        },
                                        "CSVColumnNameOrIndex": "ID",
                                        "IsPrimaryKey": true
                                      }
                                    ],
                                    "ImportCSVEncoding": "UTF-8",
                                    "RowDelimiter": "\\r\\n",
                                    "ColumnDelimiter": ",",
                                    "TextQualifier": "\"",
                                    "Comments": "このファイルはfilekeyの作成日時を識別するために一次的に作成します"
                                  },
                                  {
                                    "$type": "OperateFilesCommand.CopyFileCommand, OperateFilesCommand",
                                    "FilePath": {
                                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                      "SerializeProperty": "=Tempパス名&取得ファイル名"
                                    },
                                    "TargetFolderPath": {
                                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                      "SerializeProperty": "=Download_Server_Path&P_filekey"
                                    }
                                  }
                                ],
                                "ID": "db27f572-162b-4d92-bdc8-b597a202c614"
                              }
                            ]
                          },
                          {
                            "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                            "ParameterName": "表示ファイル名",
                            "ParameterValue": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=MID(取得ファイル名,38,100)"
                            },
                            "ID": "db516deb1e364a9989d50ce82992f4d2"
                          },
                          {
                            "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                            "ConditionAndCommandPairList": [
                              {
                                "Condition": {
                                  "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                                  "param": {
                                    "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                                    "ParamObject": {
                                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                      "SerializeProperty": "=カウンター"
                                    }
                                  },
                                  "value": "1"
                                },
                                "CommandList": [
                                  {
                                    "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                                    "ParameterName": "添付ファイル文字列",
                                    "ParameterValue": {
                                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                      "SerializeProperty": "=\"・\"&表示ファイル名"
                                    },
                                    "ID": "40a4f694aa9445e1b1ca1f18a4801cd5"
                                  }
                                ],
                                "ID": "2a72533f-dbad-4742-9a8c-a48b96de1842"
                              },
                              {
                                "CommandList": [
                                  {
                                    "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                                    "ParameterName": "添付ファイル文字列",
                                    "ParameterValue": {
                                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                      "SerializeProperty": "=添付ファイル文字列&CHAR(10)&\"・\"&表示ファイル名"
                                    },
                                    "ID": "6e32d863d91e47639b9a63199edbcb2d"
                                  }
                                ],
                                "ID": "79668cca-7d56-4be7-94da-3d0607b02ff0"
                              }
                            ]
                          }
                        ],
                        "ID": "20ad6eb8-2210-4b23-8a42-3251d874ddb3"
                      }
                    ]
                  },
                  {
                    "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                    "ParameterName": "ファイル名開始位置",
                    "ParameterValue": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=文字数+1"
                    },
                    "ID": "9402f60d0cbb48d18febfa8080eaadc1"
                  }
                ]
              },
              {
                "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                "TableName": "t_mail_history",
                "UpdateType": "add",
                "ShowConfirm": false,
                "UpdateBindingValues": [
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "sender_address",
                      "GUID": "19f24a28-7df4-4f33-9448-11c55784bcf3"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=差出人メールアドレス"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "sender_type",
                      "GUID": "812c5702-5eb5-4254-a790-dc2170b5475c"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_送信元区分"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "post_type",
                      "GUID": "796fb79b-1389-40f3-8f89-28bfa026a9bc"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_宛先区分"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "to_user_ids",
                      "GUID": "0655b7e6-8c75-4f97-9fc9-7aa490200748"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_TOユーザーIDs"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "to_add_address",
                      "GUID": "b40a34cc-9d41-41b1-a3b9-3a5c160d47a0"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_TO追加アドレス"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "to_address",
                      "GUID": "d73dff26-8815-41ee-962a-dcf7cf3597cd"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_宛先TO"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "cc_user_ids",
                      "GUID": "4d14c9d4-539d-47f9-98fd-258ae5a055c0"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_CCユーザーIDs"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "cc_add_address",
                      "GUID": "406cd989-274c-4362-bbc8-b61aedb7b49a"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_CC追加アドレス"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "cc_address",
                      "GUID": "55a0134e-486b-4519-8fd7-b8ea8072b7dc"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_宛先CC"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "subject",
                      "GUID": "cab5dfa6-8ff1-4c74-a13f-6ce86867896f"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_件名"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "body",
                      "GUID": "c1f2ff42-83d6-409b-ba4e-30dc3b57819a"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_本文"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "attachment_files",
                      "GUID": "ac982572-bdfc-4da1-b6e1-fc5f09127855"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=添付ファイル文字列"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "billing_no",
                      "GUID": "d689431a-84f1-4940-82bd-eba806c08918"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_請求番号"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "object_order_id",
                      "GUID": "fca0672f-815a-4f8f-b531-dda1209ea394"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_申込ID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "survey_id",
                      "GUID": "9523a022-05bb-4b7f-af02-caf837e43cb3"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_調査ID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "surveying_id",
                      "GUID": "a0c9b2b9-cc1c-416a-84f5-ef0aacb2d55e"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_測量ID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "analysis_id",
                      "GUID": "1d35efed-a5f9-4ff0-be2d-5a4dea03c1fa"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_解析ID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "compaction_id",
                      "GUID": "8c8a8d21-96ed-4bc3-816c-3de69251ad7f"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_転圧ID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "construction_estimate_id",
                      "GUID": "2eb3548e-6b2c-4e75-a1d8-324125758daf"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_工事見積ID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "construction_id",
                      "GUID": "5668f84e-57f3-409e-8812-bed353bc40cd"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_工事ID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "warranty_id",
                      "GUID": "7bf916ce-4384-4c07-9baf-db81276f0929"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_保証ID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "external_id",
                      "GUID": "40b18e87-aa17-4cc3-8394-ad6ab37fb7a1"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_外販ID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "send_user_id",
                      "GUID": "6bb08f02-f3e8-43d6-9f75-0b68ec593d03"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_送信ユーザーID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "send_date",
                      "GUID": "5fb75ac6-1f85-4e9f-a51b-50dc99387237"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=NOW()"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "send_label",
                      "GUID": "1b8c045d-d458-49af-8140-0f652cafa327"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=送信者ラベル"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "send_error_flg",
                      "GUID": "f285621c-ae06-44d1-986f-2ed881ad0d3d"
                    },
                    "Value": "0"
                  }
                ]
              },
              {
                "$type": "Forguncy.Model.SendMailCommand, ServerDesignerCommon",
                "From": {
                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                  "SerializeProperty": "=差出人メールアドレス"
                },
                "EnhancedRecipient": {
                  "CommonValue": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=P_宛先TO"
                  }
                },
                "Subject": {
                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                  "SerializeProperty": "=P_件名"
                },
                "Content": {
                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                  "SerializeProperty": "=P_本文"
                },
                "EnhancedCC": {
                  "CommonValue": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=P_宛先CC"
                  }
                },
                "Attachments": {
                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                  "SerializeProperty": "=IF(P_ダウンロードリンクフラグ=1,\"\",P_添付ファイル)"
                },
                "ID": "5770ae7671fe4baba7ee66a8b38238e8"
              }
            ]
          },
          "CatchCommandPart": {
            "CommandList": [
              {
                "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                "ParameterName": "送信者メールドレス",
                "TableValue": {
                  "TableName": "m_user",
                  "OnlyGetValue": true,
                  "TableValueType": 0,
                  "BindingInfos": [
                    {
                      "GUID": "fbc752ec-fca4-4655-a640-75502dad0ea2",
                      "BindingInfo": {
                        "TableName": "m_user",
                        "ColumnName": "mail_address",
                        "GUID": "eac77e66-8025-457e-bbf8-9c359d4e7492"
                      },
                      "ColumnName": "mail_address"
                    }
                  ],
                  "SqlCondition": {
                    "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                    "ColumnBindingInfo": {
                      "TableName": "m_user",
                      "ColumnName": "user_id",
                      "GUID": "0d15da59-d307-41ae-bbfc-876566336bdc"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_送信ユーザーID"
                    }
                  }
                },
                "ID": "eb5d11b76c264aa68ebd8e92a24f378e"
              },
              {
                "$type": "Forguncy.Model.SendMailCommand, ServerDesignerCommon",
                "From": {
                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                  "SerializeProperty": "=差出人メールアドレス"
                },
                "EnhancedRecipient": {
                  "CommonValue": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=送信者メールドレス"
                  }
                },
                "Subject": {
                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                  "SerializeProperty": "=\"【送信エラー】\"&P_件名"
                },
                "Content": {
                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                  "SerializeProperty": "=\"以下のメール内容については送信エラーとなりました。\"&CHAR(10)&\"設定したメールアドレスに間違いがないかを確認し再送信してください。\"&CHAR(10)&CHAR(10)&P_本文"
                },
                "Attachments": {
                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                  "SerializeProperty": "=IF(P_ダウンロードリンクフラグ=1,\"\",P_添付ファイル)"
                },
                "ID": "ffec290eb0374476b5d13b869276b04a"
              },
              {
                "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                "TableName": "t_mail_history",
                "UpdateType": "add",
                "ShowConfirm": false,
                "UpdateBindingValues": [
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "sender_address",
                      "GUID": "0cf77473-6c6a-4b92-a996-0e2f3ca626d9"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=差出人メールアドレス"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "sender_type",
                      "GUID": "e641794e-ab78-4b6c-b737-bab7ff38f56d"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_送信元区分"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "post_type",
                      "GUID": "0f343317-8bbb-4bd8-a2cb-9204297f9fca"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_宛先区分"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "to_user_ids",
                      "GUID": "e575d512-eef5-4a5e-abd7-7e894f903380"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_TOユーザーIDs"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "to_add_address",
                      "GUID": "321c76ee-a68b-4f8e-b138-ede919ca77f0"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_TO追加アドレス"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "to_address",
                      "GUID": "6b6e9c76-c381-43af-a4e6-75299bb12cfa"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_宛先TO"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "cc_user_ids",
                      "GUID": "fd6a94dd-25f8-4abd-b6d5-7cac081c7a65"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_CCユーザーIDs"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "cc_add_address",
                      "GUID": "ab427d6f-95aa-46bb-a303-7126b12983ce"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_CC追加アドレス"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "cc_address",
                      "GUID": "2cb68d08-d28e-4a6d-9b85-a99d4ae0313f"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_宛先CC"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "subject",
                      "GUID": "1318183c-a074-4662-9246-2b4459838138"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_件名"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "body",
                      "GUID": "00c46930-354e-4c41-8ecd-69a4fca27dee"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_本文"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "attachment_files",
                      "GUID": "d6d6caea-a66d-4c23-a9eb-bedd58cf27fc"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=添付ファイル文字列"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "billing_no",
                      "GUID": "a2bf0beb-67a4-4b31-b523-6282e3776d47"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_請求番号"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "object_order_id",
                      "GUID": "680bd78e-4584-4063-8de9-0c94e63f16d4"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_申込ID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "survey_id",
                      "GUID": "f1e4df54-4e96-46f3-8a21-92c7cb4f2312"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_調査ID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "surveying_id",
                      "GUID": "2c239f0d-c888-46b5-8381-d2289af7a128"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_測量ID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "analysis_id",
                      "GUID": "09b1435f-0877-4c1f-a706-06172752795e"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_解析ID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "compaction_id",
                      "GUID": "63f0f2d0-a12f-403f-8e59-36bac651ac7f"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_転圧ID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "construction_estimate_id",
                      "GUID": "696ae6b2-0cc3-4698-8652-a8ed90159f29"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_工事見積ID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "construction_id",
                      "GUID": "a17e8fdc-a422-49a3-8732-5ad6b77d7595"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_工事ID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "warranty_id",
                      "GUID": "3aa37f50-1097-4240-a781-cb96e4beec33"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_保証ID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "external_id",
                      "GUID": "05b16284-140d-4dbc-a222-f5510d155e51"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_外販ID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "send_user_id",
                      "GUID": "c79f222c-f4ee-4c04-9814-6739052e88a9"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=P_送信ユーザーID"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "send_date",
                      "GUID": "fb11c049-0daf-4b7b-8419-bd6bee969e06"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=NOW()"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "send_label",
                      "GUID": "c9d8e77f-06dc-4876-b47e-d6b09b9f4e04"
                    },
                    "Value": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=送信者ラベル"
                    }
                  },
                  {
                    "BindingInfo": {
                      "TableName": "t_mail_history",
                      "ColumnName": "send_error_flg",
                      "GUID": "5198b194-67fb-42e0-b346-4adf7d6a039b"
                    },
                    "Value": "1"
                  }
                ]
              },
              {
                "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
                "ErrorCode": "100",
                "Message": {
                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                  "SerializeProperty": "=\"メール送信に失敗しました\"&CHAR(10)&ExceptionMessage"
                }
              }
            ]
          }
        }
      ]
    }
  ]
}