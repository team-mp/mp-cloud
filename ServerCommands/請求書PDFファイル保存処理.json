{
  "Name": "請求書PDFファイル保存処理",
  "Enabled": true,
  "Triggers": [
    {
      "$type": "Forguncy.SaveLoad.PostRequestTriggerSaveData, ServerDesignerCommon",
      "Permission": {
        "PermissionData": {
          "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionData, Forguncy.RbacPermission.Core",
          "permissionResource": {
            "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionResource, Forguncy.RbacPermission.Core"
          },
          "permissionBindings": [
            {
              "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionBinding, Forguncy.RbacPermission.Core",
              "roleNames": [
                "FGC_LoginUser"
              ]
            }
          ]
        }
      },
      "Parameters": [
        {
          "Name": "P_ファイル属性ID",
          "DataValidationInfo": {}
        },
        {
          "Type": 1,
          "ArrayParamItems": [
            {
              "Name": "P_選択フラグ",
              "DataValidationInfo": {}
            },
            {
              "Name": "P_請求番号",
              "DataValidationInfo": {}
            },
            {
              "Name": "P_請求先ID",
              "DataValidationInfo": {}
            },
            {
              "Name": "P_請求先名",
              "DataValidationInfo": {}
            },
            {
              "Name": "P_請求日",
              "DataValidationInfo": {}
            }
          ],
          "Name": "P_請求書リスト",
          "DataValidationInfo": {}
        }
      ]
    }
  ],
  "Commands": [
    {
      "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
      "ParameterName": "ファイル属性",
      "TableValue": {
        "TableName": "m_file_attirbute",
        "TableValueType": 1,
        "BindingInfos": [
          {
            "GUID": "08e2ed51-1380-4079-ba90-e310d7b0018e",
            "BindingInfo": {
              "TableName": "m_file_attirbute",
              "ColumnName": "initial_priave_flg",
              "GUID": "6e5dc1a9-f536-44e8-86ba-a38b69ec11d0"
            },
            "ColumnName": "初期非公開フラグ"
          },
          {
            "GUID": "ab5b692c-0fae-44e6-aaa1-d4e26e79800c",
            "BindingInfo": {
              "TableName": "m_file_attirbute",
              "ColumnName": "file_attibute_name",
              "GUID": "f75195fc-6838-4106-9edc-a95c34cb15f6"
            },
            "ColumnName": "ファイル属性名"
          }
        ],
        "SqlCondition": {
          "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
          "ColumnBindingInfo": {
            "TableName": "m_file_attirbute",
            "ColumnName": "file_attribute_id",
            "GUID": "817b4af0-2622-4e5a-8d2c-03795cf0402e"
          },
          "Value": {
            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
            "SerializeProperty": "=P_ファイル属性ID"
          }
        }
      },
      "ID": "59fcaf52412f430dbff6fc1f166fbf25"
    },
    {
      "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
      "ParameterName": "ファイル公開フラグ",
      "ParameterValue": {
        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
        "SerializeProperty": "=IF(ファイル属性.初期非公開フラグ=1,0,1)"
      },
      "ID": "bd7053b32aac4c7a925bdec039cdb625"
    },
    {
      "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
      "ParameterName": "アプリ名",
      "TableValue": {
        "TableName": "m_environment",
        "OnlyGetValue": true,
        "TableValueType": 0,
        "BindingInfos": [
          {
            "GUID": "0f98e7d0-a6f2-4904-a589-6f3f5c003ada",
            "BindingInfo": {
              "TableName": "m_environment",
              "ColumnName": "app_name",
              "GUID": "7fb91224-e43d-42b4-b657-f952a030cf58"
            },
            "ColumnName": "app_name"
          }
        ],
        "SqlCondition": {
          "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
          "ColumnBindingInfo": {
            "TableName": "m_environment",
            "ColumnName": "ID",
            "GUID": "4a590580-4354-4341-9f0a-7ec22ea985d6"
          },
          "Value": "1"
        }
      },
      "ID": "98955f4dded34f43b8c405e220a5ea74"
    },
    {
      "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
      "ParameterName": "DropBoxフォルダパス",
      "TableValue": {
        "TableName": "m_environment",
        "OnlyGetValue": true,
        "TableValueType": 0,
        "BindingInfos": [
          {
            "GUID": "660db3be-c152-45e2-a715-7eedeb64027d",
            "BindingInfo": {
              "TableName": "m_environment",
              "ColumnName": "dropbox_folder_path",
              "GUID": "4eef8d6d-2b91-4f2a-a69c-8bf265b30e9b"
            },
            "ColumnName": "dropbox_folder_path"
          }
        ],
        "SqlCondition": {
          "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
          "ColumnBindingInfo": {
            "TableName": "m_environment",
            "ColumnName": "ID",
            "GUID": "1cb31143-76c6-4738-98df-88354536a194"
          },
          "Value": "1"
        }
      },
      "ID": "10f43df5c53f4df9bef2aa5a38add5a7"
    },
    {
      "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
      "ParameterName": "保存先サーバーパス名",
      "ParameterValue": {
        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
        "SerializeProperty": "=DropBoxフォルダパス&ファイル属性.ファイル属性名&\"\\\""
      },
      "ID": "339f767f7ede4044ac75e02387f7e2b3"
    },
    {
      "$type": "OperateFilesCommand.CreateFolderCommand, OperateFilesCommand",
      "FolderPath": {
        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
        "SerializeProperty": "=保存先サーバーパス名"
      },
      "Comments": "請求書フォルダの作成"
    },
    {
      "$type": "Forguncy.Model.LoopCommand, ServerDesignerCommon",
      "LoopInfo": {
        "$type": "Forguncy.Model.CountLoopInfo, ServerDesignerCommon",
        "LoopCount": {
          "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
          "SerializeProperty": "=P_請求書リスト"
        },
        "LoopItemParamName": "Item"
      },
      "CommandList": [
        {
          "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
          "ConditionAndCommandPairList": [
            {
              "Condition": {
                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                "param": {
                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                  "ParamObject": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=Item.P_選択フラグ"
                  }
                },
                "value": "1"
              },
              "CommandList": [
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "第一階層フォルダ名",
                  "ParameterValue": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=TEXT(Item.P_請求日,\"yyyy年mm月\")"
                  },
                  "ID": "eac1724f30c14ae08089f6666c32975c",
                  "Comments": "年月"
                },
                {
                  "$type": "OperateFilesCommand.CreateFolderCommand, OperateFilesCommand",
                  "FolderPath": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=保存先サーバーパス名&第一階層フォルダ名"
                  },
                  "Comments": "第一階層フォルダの作成"
                },
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "第二階層フォルダ名",
                  "ParameterValue": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=第一階層フォルダ名&\"\\\"&TEXT(Item.P_請求日,\"yyyy年mm月dd日\")"
                  },
                  "ID": "00e5b885f2e047a2b2d1b63e7410ff80",
                  "Comments": "物件番号"
                },
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "保存先フォルダパス名",
                  "ParameterValue": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=保存先サーバーパス名&第二階層フォルダ名&\"\\\""
                  },
                  "ID": "8eb339058cbe4ce0865cbb0d4aa6970c"
                },
                {
                  "$type": "OperateFilesCommand.CreateFolderCommand, OperateFilesCommand",
                  "FolderPath": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=保存先フォルダパス名"
                  },
                  "Comments": "第二階層"
                },
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "請求書発行単位",
                  "TableValue": {
                    "TableName": "m_customer",
                    "OnlyGetValue": true,
                    "TableValueType": 0,
                    "BindingInfos": [
                      {
                        "GUID": "6c878445-4afa-421e-9e4a-e27423e59ffe",
                        "BindingInfo": {
                          "TableName": "m_customer",
                          "ColumnName": "invoice_issue_unit_id",
                          "GUID": "35fc80f9-e895-4743-9b7e-2b2c14294462"
                        },
                        "ColumnName": "invoice_issue_unit_id"
                      }
                    ],
                    "SqlCondition": {
                      "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                      "ColumnBindingInfo": {
                        "TableName": "m_customer",
                        "ColumnName": "customer_id",
                        "GUID": "dcf7f2f4-1387-46b0-9921-914e9126e1be"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=Item.P_請求先ID"
                      }
                    }
                  },
                  "ID": "a432f5f1f0964dbf85ec30862be9ca75"
                },
                {
                  "$type": "Forguncy.Model.RequestServerCommand, ServerDesignerCommon",
                  "ServerCommandName": "ファイル名文字列変換",
                  "Parameters": [
                    {
                      "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                      "ParamName": "P_変換元文字列",
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=Item.P_請求先名"
                      }
                    }
                  ],
                  "ReturnPropertiesTo": [
                    {
                      "ResultPropertyName": "R_変換後文字列",
                      "ResultTo": {
                        "SerializeProperty": "変換請求先名"
                      }
                    }
                  ],
                  "RefreshAfterFinish": true,
                  "CheckDataValidation": true,
                  "Comments": "文字列でファイル名に使えない文字を調整する"
                },
                {
                  "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                  "ConditionAndCommandPairList": [
                    {
                      "Condition": {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=請求書発行単位"
                          }
                        },
                        "value": "2"
                      },
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                          "ParameterName": "取得物件名",
                          "TableValue": {
                            "TableName": "t_sales",
                            "OnlyGetValue": true,
                            "TableValueType": 0,
                            "BindingInfos": [
                              {
                                "GUID": "8d9185b9-a1f2-4a25-8ebd-f769b0f35b3a",
                                "BindingInfo": {
                                  "TableName": "t_sales",
                                  "ColumnName": "object_name",
                                  "GUID": "4b0f5367-1daf-4868-aae1-aacefd6c87a8"
                                },
                                "ColumnName": "object_name"
                              }
                            ],
                            "SqlCondition": {
                              "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                              "SubConditions": [
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "billing_no",
                                    "GUID": "d331a2a2-8885-4bdb-af2a-fd1560e8e8a4"
                                  },
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=Item.P_請求番号"
                                  }
                                },
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "delete_flg",
                                    "GUID": "1e6803f0-0221-4d22-9376-a153ffbd2495"
                                  },
                                  "Value": "0"
                                }
                              ]
                            },
                            "NullFormulaValueQueryPolicy": 0,
                            "TopCount": "1"
                          },
                          "ID": "e160e0adb84b4c638f09506b32025c02"
                        },
                        {
                          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                          "ParameterName": "出力ファイル名",
                          "ParameterValue": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=Item.P_請求番号&\"_\"&変換請求先名&\"様_\"&取得物件名&\".pdf\""
                          },
                          "ID": "cd597ac1edc9416cb64531eb99dbd8ec"
                        }
                      ],
                      "Comments": "物件単位の場合",
                      "ID": "4cf3ef68-0744-47dc-83de-b0a91636e77b"
                    },
                    {
                      "Condition": {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=請求書発行単位"
                          }
                        },
                        "value": "3"
                      },
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                          "ParameterName": "取得物件担当者名",
                          "TableValue": {
                            "TableName": "t_sales",
                            "OnlyGetValue": true,
                            "TableValueType": 0,
                            "BindingInfos": [
                              {
                                "GUID": "c5b30191-664a-41d1-b58b-75439aa15e84",
                                "BindingInfo": {
                                  "TableName": "t_sales",
                                  "ColumnName": "object_order_id",
                                  "GUID": "a830f2e4-d060-4beb-8bdf-173410a20f2a",
                                  "RelationBinding": {
                                    "RelatedTable": "t_object_order",
                                    "RelatedColumn": "object_order_id",
                                    "DisplayColumn": "object_user_id",
                                    "NextRelationBinding": {
                                      "RelatedTable": "m_user",
                                      "RelatedColumn": "user_id",
                                      "DisplayColumn": "user_name"
                                    }
                                  }
                                },
                                "ColumnName": "user_name"
                              }
                            ],
                            "SqlCondition": {
                              "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                              "SubConditions": [
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "billing_no",
                                    "GUID": "3f36c00a-ac9d-45a2-8df2-8976564cfe29"
                                  },
                                  "Value": {
                                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                    "SerializeProperty": "=Item.P_請求番号"
                                  }
                                },
                                {
                                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                  "ColumnBindingInfo": {
                                    "TableName": "t_sales",
                                    "ColumnName": "delete_flg",
                                    "GUID": "10e565dc-61ed-4288-bb13-b5792411ee10"
                                  },
                                  "Value": "0"
                                }
                              ]
                            },
                            "NullFormulaValueQueryPolicy": 0,
                            "TopCount": "1"
                          },
                          "ID": "257d78f3a6fb4b09b2d093f45bf6878d"
                        },
                        {
                          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                          "ParameterName": "出力ファイル名",
                          "ParameterValue": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=Item.P_請求番号&\"_\"&変換請求先名&\"_\"&取得物件担当者名&\"様.pdf\""
                          },
                          "ID": "07144cb5dd0a432a900be7c54cf688e3"
                        }
                      ],
                      "Comments": "物件担当者単位",
                      "ID": "9981d42a-ce8e-4911-8170-b8d183cb3d31"
                    },
                    {
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                          "ParameterName": "出力ファイル名",
                          "ParameterValue": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=Item.P_請求番号&\"_\"&変換請求先名&\"様.pdf\""
                          },
                          "ID": "74399558bb4b47e38b087c37db2f0a0f"
                        }
                      ],
                      "ID": "19cdfc2b-c059-4c18-b6c2-4fde25f3eaec"
                    }
                  ]
                },
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "出力ファイルパス名",
                  "ParameterValue": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=保存先フォルダパス名&出力ファイル名"
                  },
                  "ID": "a86e08ebc2424462a05434858dd43189"
                },
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "DropBox出力ファイルパス名",
                  "ParameterValue": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=SUBSTITUTE(出力ファイルパス名,\"C:\\MP-Cloud\\Dropbox\",\"\")"
                  },
                  "ID": "e2eb24d6d5874d8f99ab7a7570b3739f"
                },
                {
                  "$type": "OperateFilesCommand.CloudStorage.GetFileInformation, OperateFilesCommand",
                  "FilePath": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=DropBox出力ファイルパス名"
                  },
                  "FileInfomationType": 5,
                  "ToParameterName": "ファイル有無",
                  "Type": "DropboxStrage"
                },
                {
                  "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                  "ConditionAndCommandPairList": [
                    {
                      "Condition": {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=ファイル有無"
                          }
                        },
                        "value": "True"
                      },
                      "CommandList": [
                        {
                          "$type": "OperateFilesCommand.CloudStorage.DeleteFileCommand, OperateFilesCommand",
                          "FilePath": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=DropBox出力ファイルパス名"
                          },
                          "Type": "DropboxStrage"
                        }
                      ],
                      "ID": "40c13506-e65c-4e37-b27d-e14675528ba9"
                    }
                  ]
                },
                {
                  "$type": "Forguncy.Model.ExportActiveReportCommand, ServerDesignerCommon",
                  "ExportReportNameList": [
                    "請求書"
                  ],
                  "CustomName": "請求書",
                  "ServerExportFileName": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=出力ファイルパス名"
                  },
                  "ExportSettings": {
                    "MultiSheet": true
                  },
                  "PassParameters": [
                    {
                      "TargetParameter": "P_請求番号",
                      "SourceValue": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=Item.P_請求番号"
                      }
                    }
                  ],
                  "IsPageBreakBefores": [
                    false
                  ],
                  "ReportGaps": [
                    "0cm"
                  ]
                },
                {
                  "$type": "OperateFilesCommand.GetFileInformation, OperateFilesCommand",
                  "FilePath": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=出力ファイルパス名"
                  },
                  "FileInfomationType": 6,
                  "ToParameterName": "ファイルサイズ"
                },
                {
                  "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
                  "ParameterName": "登録済み件数",
                  "TableValue": {
                    "TableName": "t_invoice_attachment",
                    "TableValueType": 3,
                    "SqlCondition": {
                      "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                      "SubConditions": [
                        {
                          "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                          "ColumnBindingInfo": {
                            "TableName": "t_invoice_attachment",
                            "ColumnName": "billing_no",
                            "GUID": "4de3b38f-4e39-4432-a508-5c37770a9fa1"
                          },
                          "Value": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=Item.P_請求番号"
                          }
                        },
                        {
                          "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                          "ColumnBindingInfo": {
                            "TableName": "t_invoice_attachment",
                            "ColumnName": "file_attribute_id",
                            "GUID": "323c0121-dcc8-416c-a342-a4d503fbe742"
                          },
                          "Value": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=P_ファイル属性ID"
                          }
                        },
                        {
                          "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                          "ColumnBindingInfo": {
                            "TableName": "t_invoice_attachment",
                            "ColumnName": "active_flg",
                            "GUID": "9d585e96-3d50-480d-8f94-e1f8ac211f7a"
                          },
                          "Value": "1"
                        }
                      ]
                    }
                  },
                  "ID": "c3c5c9f125634c36b3b623832b705cc5"
                },
                {
                  "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
                  "ConditionAndCommandPairList": [
                    {
                      "Condition": {
                        "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                        "param": {
                          "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                          "ParamObject": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=登録済み件数"
                          }
                        },
                        "value": "0"
                      },
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                          "TableName": "t_invoice_attachment",
                          "UpdateType": "add",
                          "ShowConfirm": false,
                          "UpdateBindingValues": [
                            {
                              "BindingInfo": {
                                "TableName": "t_invoice_attachment",
                                "ColumnName": "billing_no",
                                "GUID": "c3756dd4-de7e-4208-8ba0-ebb7f7c3b8f3"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=Item.P_請求番号"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_invoice_attachment",
                                "ColumnName": "file_attribute_id",
                                "GUID": "b6a0b06b-89f2-4222-8490-ccde7872110f"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=P_ファイル属性ID"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_invoice_attachment",
                                "ColumnName": "display_file_name",
                                "GUID": "fb371956-0275-429f-8282-c422c40c2b79"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=出力ファイル名"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_invoice_attachment",
                                "ColumnName": "file_path_name",
                                "GUID": "af8a8d0e-13e4-4dfe-ac15-5ad1812142e4"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=保存先フォルダパス名"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_invoice_attachment",
                                "ColumnName": "save_file_name",
                                "GUID": "bcee7586-911a-4ecc-a1c5-3977b9e55ff2"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=出力ファイル名"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_invoice_attachment",
                                "ColumnName": "file_size",
                                "GUID": "7b4d1bd7-84ef-4620-988a-c048071e458c"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=ファイルサイズ"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_invoice_attachment",
                                "ColumnName": "file_created_date",
                                "GUID": "a1b945e2-4824-4b47-ab28-c8f3fdbc821c"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=NOW()"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_invoice_attachment",
                                "ColumnName": "upload_user_id",
                                "GUID": "bd905807-c5ba-4b3f-bbc0-026b6daf6972"
                              },
                              "Value": "%CurrentUser.user_id%"
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_invoice_attachment",
                                "ColumnName": "publish_flg",
                                "GUID": "556038fc-0c83-44a4-bb8f-9e0f6ba1248a"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=ファイル公開フラグ"
                              }
                            }
                          ]
                        }
                      ],
                      "ID": "549f1297-c0d8-4426-9f88-69eff9790c00"
                    },
                    {
                      "CommandList": [
                        {
                          "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                          "TableName": "t_invoice_attachment",
                          "ShowConfirm": false,
                          "RowsToUpdate": 1,
                          "RowsToUpdateCondition": {
                            "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                            "SubConditions": [
                              {
                                "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                "ColumnBindingInfo": {
                                  "TableName": "t_invoice_attachment",
                                  "ColumnName": "billing_no",
                                  "GUID": "5ef3e0d9-6be2-43ae-b8e1-3d6ffe26b555"
                                },
                                "Value": {
                                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                  "SerializeProperty": "=Item.P_請求番号"
                                }
                              },
                              {
                                "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                "ColumnBindingInfo": {
                                  "TableName": "t_invoice_attachment",
                                  "ColumnName": "file_attribute_id",
                                  "GUID": "e64ce079-70ea-4c56-819d-635522f41782"
                                },
                                "Value": {
                                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                  "SerializeProperty": "=P_ファイル属性ID"
                                }
                              },
                              {
                                "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                                "ColumnBindingInfo": {
                                  "TableName": "t_invoice_attachment",
                                  "ColumnName": "active_flg",
                                  "GUID": "93e85dca-1e9f-4d69-aff4-313ef100757e"
                                },
                                "Value": "1"
                              }
                            ]
                          },
                          "UpdateBindingValues": [
                            {
                              "BindingInfo": {
                                "TableName": "t_invoice_attachment",
                                "ColumnName": "file_attribute_id",
                                "GUID": "6347b8ea-1d79-439e-93af-aae9ce80a586"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=P_ファイル属性ID"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_invoice_attachment",
                                "ColumnName": "display_file_name",
                                "GUID": "49084810-d050-4728-8364-f7f3794ab4ef"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=出力ファイル名"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_invoice_attachment",
                                "ColumnName": "file_path_name",
                                "GUID": "acade94f-aea2-4366-8c6e-70bc6cdcc954"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=保存先フォルダパス名"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_invoice_attachment",
                                "ColumnName": "save_file_name",
                                "GUID": "b9cd8dc0-8b63-48e1-8b23-9573f0d43e43"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=出力ファイル名"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_invoice_attachment",
                                "ColumnName": "file_size",
                                "GUID": "e15f4fce-2c2e-4469-84b2-e39ff81a080b"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=ファイルサイズ"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_invoice_attachment",
                                "ColumnName": "file_created_date",
                                "GUID": "bc901307-20e9-4223-a6ee-90aa8aa5caaa"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=NOW()"
                              }
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_invoice_attachment",
                                "ColumnName": "upload_user_id",
                                "GUID": "53332f61-ba2b-4957-84e7-ae6284ad1245"
                              },
                              "Value": "%CurrentUser.user_id%"
                            },
                            {
                              "BindingInfo": {
                                "TableName": "t_invoice_attachment",
                                "ColumnName": "publish_flg",
                                "GUID": "0398ba94-cc2a-45c3-b58a-faaf65a284a7"
                              },
                              "Value": {
                                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                "SerializeProperty": "=ファイル公開フラグ"
                              }
                            }
                          ]
                        }
                      ],
                      "ID": "7d0e0f74-93d0-49e6-80a9-c91995dc1780"
                    }
                  ]
                },
                {
                  "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                  "TableName": "t_sales",
                  "ShowConfirm": false,
                  "RowsToUpdate": 1,
                  "RowsToUpdateCondition": {
                    "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                    "SubConditions": [
                      {
                        "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                        "ColumnBindingInfo": {
                          "TableName": "t_sales",
                          "ColumnName": "billing_no",
                          "GUID": "e7f9af54-4eab-41c0-9251-33e425620574"
                        },
                        "Value": {
                          "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                          "SerializeProperty": "=Item.P_請求番号"
                        }
                      },
                      {
                        "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                        "ColumnBindingInfo": {
                          "TableName": "t_sales",
                          "ColumnName": "delete_flg",
                          "GUID": "427bb83f-46c0-4b99-b702-9d85f0c8ec40"
                        },
                        "Value": "0"
                      }
                    ]
                  },
                  "UpdateBindingValues": [
                    {
                      "BindingInfo": {
                        "TableName": "t_sales",
                        "ColumnName": "pdf_save_date",
                        "GUID": "2b43c525-5e8c-4cd4-8a04-b30969592424"
                      },
                      "Value": {
                        "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                        "SerializeProperty": "=TODAY()"
                      }
                    },
                    {
                      "BindingInfo": {
                        "TableName": "t_sales",
                        "ColumnName": "pdf_save_flg",
                        "GUID": "c8c6d571-1802-4e39-8241-843b69010c00"
                      },
                      "Value": "1"
                    }
                  ]
                }
              ],
              "ID": "a7e60466-63cb-4474-b77f-f50a36115654"
            }
          ]
        }
      ]
    }
  ]
}