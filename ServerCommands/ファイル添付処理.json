{
  "Enabled": true,
  "Triggers": [
    {
      "$type": "Forguncy.ServerCommands.Models.PostRequestTrigger, ServerDesignerCommon",
      "Permission": {
        "AllowRoles": [
          "FGC_LoginUser"
        ]
      },
      "Parameters": [
        {
          "Name": "P_物件ID"
        },
        {
          "Name": "P_ファイル属性ID"
        },
        {
          "Name": "P_添付コメント"
        },
        {
          "Name": "P_添付ファイル"
        }
      ]
    }
  ],
  "Commands": [
    {
      "$type": "Forguncy.Model.ServerTransactionCommand, ServerDesignerCommon",
      "CommandList": [
        {
          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
          "ParameterName": "物件情報",
          "TableValue": {
            "TableName": "t_object",
            "TableValueType": 1,
            "BindingInfos": [
              {
                "BindingInfo": {
                  "TableName": "t_object",
                  "ColumnName": "物件番号"
                },
                "ColumnName": "物件番号"
              },
              {
                "BindingInfo": {
                  "TableName": "t_object",
                  "ColumnName": "order_date"
                },
                "ColumnName": "申込日"
              }
            ],
            "SqlCondition": {
              "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
              "ColumnBindingInfo": {
                "TableName": "t_object",
                "ColumnName": "object_id"
              },
              "Value": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=P_物件ID"
              }
            }
          },
          "ID": "a545c9392e6249ffbe2392f935777660"
        },
        {
          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
          "ParameterName": "保存元サーバーパス名",
          "ID": "856cd1bc9418498c92e50bcd2be3b839"
        },
        {
          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
          "ParameterName": "添付ファイル数",
          "ParameterValue": {
            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
            "SerializeProperty": "=LEN(P_添付コメント)-LEN(SUBSTITUTE(P_添付コメント,\"|\",\"\"))"
          },
          "ID": "9ec04706d761405d8982757a25bb8a9a"
        },
        {
          "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
          "ParameterName": "ファイル名開始位置",
          "ParameterValue": "1",
          "ID": "4877c4bb4937401a9698a1f473062215"
        },
        {
          "$type": "Forguncy.Model.LoopCommand, ServerDesignerCommon",
          "LoopInfo": {
            "$type": "Forguncy.Model.CountLoopInfo, ServerDesignerCommon",
            "LoopCount": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=添付ファイル数"
            },
            "LoopItemParamName": "Item"
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "文字数",
              "ParameterValue": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=FIND(\"|\",P_添付コメント,ファイル名開始位置)"
              },
              "ID": "954d65950e4e4feba7e497282b746a5f"
            },
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "取得ファイル名",
              "ParameterValue": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=MID(P_添付ファイル,ファイル名開始位置,文字数-ファイル名開始位置)"
              },
              "ID": "0044e17d02004ac4bc2576a4edbde433"
            },
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "ファイル名開始位置",
              "ParameterValue": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=文字数+1"
              },
              "ID": "c1099d7587c34f43bf757e230debbd4a"
            }
          ]
        }
      ]
    }
  ],
  "Name": "ファイル添付処理"
}